"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[445],{3712:(e,r,i)=>{i.d(r,{Z:()=>a});var t=i(1938),n=i(8735),l=i(184);const a=function(e){const{variant:r,children:i,...a}=e,o=(0,t.mq)("Card",{variant:r});return(0,l.jsx)(n.Box,{__css:o,height:"100%",...a,children:i})}},3252:(e,r,i)=>{i.d(r,{Z:()=>l});var t=i(2791),n=i(184);const l=function(e){let{targetNumber:r}=e;const[i,l]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const e=setInterval((()=>{i<r&&l((e=>e+1))}),r>500?0:20);return()=>{clearInterval(e)}}),[i,r]),(0,n.jsx)("span",{children:"number"===typeof r?i:r})}},7880:(e,r,i)=>{i.d(r,{Z:()=>u});var t=i(5272),n=i(8735),l=i(1070),a=i(2504),o=i(5154),s=i(7640),d=i(2791),c=i(184);const u=e=>{const{gotoPage:r,gopageValue:i,setGopageValue:u,pageCount:m,canPreviousPage:h,previousPage:x,canNextPage:p,pageOptions:v,setPageSize:g,nextPage:f,pageSize:j,pageIndex:Z}=e;return(0,d.useEffect)((()=>{u(1)}),[]),(0,c.jsxs)(n.Flex,{justifyContent:"space-between",mt:2,alignItems:"center",children:[1!==(null===v||void 0===v?void 0:v.length)&&(0,c.jsxs)(n.Flex,{children:[(0,c.jsx)(l.u,{label:"First Page",children:(0,c.jsx)(a.IconButton,{onClick:()=>{r(0),u(1)},isDisabled:!h,icon:(0,c.jsx)(t.ArrowLeftIcon,{h:3,w:3}),mr:4})}),(0,c.jsx)(l.u,{label:"Previous Page",children:(0,c.jsx)(a.IconButton,{onClick:()=>{x(),u((e=>e-1))},isDisabled:!h,icon:(0,c.jsx)(t.ChevronLeftIcon,{h:6,w:6})})})]}),(0,c.jsxs)(n.Flex,{alignItems:"center",children:[1!==(null===v||void 0===v?void 0:v.length)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.Text,{flexShrink:"0",mr:8,children:["Page"," ",(0,c.jsx)(n.Text,{fontWeight:"bold",as:"span",children:Z+1})," ","of"," ",(0,c.jsx)(n.Text,{fontWeight:"bold",as:"span",children:null===v||void 0===v?void 0:v.length})]}),(0,c.jsx)(n.Text,{flexShrink:"0",children:"Go to page:"})," ",(0,c.jsxs)(o.Y2,{ml:2,mr:8,w:28,min:1,max:null===v||void 0===v?void 0:v.length,value:i,onChange:e=>{r(e?e-1:0),u(e)},defaultValue:Z+1,children:[(0,c.jsx)(o.zu,{}),(0,c.jsxs)(o.Fi,{children:[(0,c.jsx)(o.WQ,{}),(0,c.jsx)(o.Y_,{})]})]})]}),(0,c.jsx)(s.Ph,{w:32,value:j,onChange:e=>{g(Number(e.target.value))},children:[5,10,20,30,40,50].map((e=>(0,c.jsxs)("option",{value:e,children:["Show ",e]},e)))})]}),1!==(null===v||void 0===v?void 0:v.length)&&(0,c.jsxs)(n.Flex,{children:[(0,c.jsx)(l.u,{label:"Next Page",children:(0,c.jsx)(a.IconButton,{onClick:()=>{f(),u((e=>e+1))},isDisabled:!p,icon:(0,c.jsx)(t.ChevronRightIcon,{h:6,w:6})})}),(0,c.jsx)(l.u,{label:"Last Page",children:(0,c.jsx)(a.IconButton,{onClick:()=>{r(m-1),u(m)},isDisabled:!p,icon:(0,c.jsx)(t.ArrowRightIcon,{h:3,w:3}),ml:4})})]})]})}},4220:(e,r,i)=>{i.d(r,{Z:()=>n});var t=i(184);const n=()=>(0,t.jsx)("div",{className:"loader"})},2630:(e,r,i)=>{i.d(r,{Ko:()=>p,A5:()=>x,OD:()=>n,Bl:()=>u,Io:()=>c,sL:()=>o,dm:()=>d,Fv:()=>m,GI:()=>a,oz:()=>h,IK:()=>s});var t=i(8007);const n=t.Ry({firstName:t.Z_().min(2).required("First Name is required"),lastName:t.Z_().min(2).required("Last Name is required"),title:t.Z_().required("Title is required"),email:t.Z_().email().required("Email is required"),phoneNumber:t.Rx().min(1e9,"Phone number is invalid").max(999999999999,"Phone number is invalid").required("Phonenumber is Required"),mobileNumber:t.Rx().min(1e9,"Phone number is invalid").max(999999999999,"Phone number is invalid").notRequired(),physicalAddress:t.Z_().required("Physical address is required"),mailingAddress:t.Z_(),preferredContactMethod:t.Z_().required("Preferred contact method is required"),leadSource:t.Z_(),referralSource:t.Z_(),campaignSource:t.Z_(),leadStatus:t.Z_(),leadRating:t.Rx(),leadConversionProbability:t.Z_(),emailHistory:t.Z_(),phoneCallHistory:t.Z_(),meetingHistory:t.Z_(),notesandComments:t.Z_(),tagsOrLabelsForcategorizingcontacts:t.Z_(),birthday:t.hT(),anniversary:t.hT(),keyMilestones:t.Z_(),dob:t.Z_(),gender:t.Z_(),occupation:t.Z_(),interestsOrHobbies:t.Z_(),communicationFrequency:t.Z_(),preferences:t.Z_(),linkedInProfile:t.Z_(),facebookProfile:t.Z_(),twitterHandle:t.Z_(),otherProfiles:t.Z_(),agentOrTeamMember:t.Z_(),internalNotesOrComments:t.Z_(),createBy:t.Z_()}),l=(new Date).getFullYear(),a=t.Ry({propertyType:t.Z_().required("Property Type Is required"),propertyAddress:t.Z_().required("Property Address Is required"),listingPrice:t.Z_().required("Listing Price Is required"),squareFootage:t.Z_().required("Square Footage Is required"),numberofBedrooms:t.Rx().required("Number Of Bedrooms Is required"),numberofBathrooms:t.Rx().required("Number Of Bathrooms Is required"),yearBuilt:t.Rx().min(1e3).max(l).required("Year Built Is required"),propertyDescription:t.Z_().required("Property Description Is required"),lotSize:t.Z_(),parkingAvailability:t.Z_(),appliancesIncluded:t.Z_(),heatingAndCoolingSystems:t.Z_(),flooringType:t.Z_(),exteriorFeatures:t.Z_(),communityAmenities:t.Z_(),propertyPhotos:t.Z_(),virtualToursOrVideos:t.Z_(),floorPlans:t.Z_(),propertyDocuments:t.Z_(),listingStatus:t.Z_(),listingAgentOrTeam:t.Z_(),listingDate:t.Z_(),marketingDescription:t.Z_(),multipleListingService:t.Z_(),previousOwners:t.Rx().min(0),purchaseHistory:t.Z_(),propertyTaxes:t.Z_(),homeownersAssociation:t.Z_(),mortgageInformation:t.Z_(),sellers:t.Z_(),buyers:t.Z_(),propertyManagers:t.Z_(),contractorsOrServiceProviders:t.Z_(),internalNotesOrComments:t.Z_()}),o=t.Ry({leadName:t.Z_().required("Lead Name Is required"),leadEmail:t.Z_().email().required("Lead Email Is required"),leadPhoneNumber:t.Z_().min(1e9,"Phone number is invalid").max(999999999999,"Phone number is invalid").required("Lead Phone Number Is required"),leadAddress:t.Z_().required("Lead Address Is required"),leadSource:t.Z_(),leadStatus:t.Z_(),leadSourceDetails:t.Z_(),leadCampaign:t.Z_(),leadSourceChannel:t.Z_(),leadSourceMedium:t.Z_(),leadSourceCampaign:t.Z_(),leadSourceReferral:t.Z_(),leadAssignedAgent:t.Z_(),leadOwner:t.Z_(),leadCommunicationPreferences:t.Z_(),leadCreationDate:t.hT().required("Lead Creation Date Is required"),leadConversionDate:t.hT().required("Lead Conversion Date Is required"),leadFollowUpDate:t.hT().required("lead Follow Up Date  Is required"),leadFollowUpStatus:t.Z_(),leadScore:t.Rx().required("Lead Score Is required"),leadNurturingWorkflow:t.Z_(),leadEngagementLevel:t.Z_(),leadConversionRate:t.Rx().required("lead Conversion Rate Is required"),leadNurturingStage:t.Z_(),leadNextAction:t.Z_()}),s=t.Ry({firstName:t.Z_().required("First Name Is required"),lastName:t.Z_(),phoneNumber:t.Z_().required("Phone Number Is required").matches(/^\d{10}$/,"Phone Number must be exactly 10 digits"),username:t.Z_().email().required("Email Is required")}),d=t.Ry({username:t.Z_().email().required("Email Is required"),password:t.Z_().required("Password Is required")}),c=t.Ry({sender:t.Z_().required("Sender Is required"),recipient:t.Z_().email().required("Recipient Is required"),cc:t.Z_().email(),bcc:t.Z_().email(),relatedToContact:t.Z_(),relatedToLead:t.Z_(),subject:t.Z_(),message:t.Z_(),createBy:t.Z_(),createByLead:t.Z_()}).test("createBy-or-createByLead-required","Recipient Is required",(function(e){if(!e.createBy&&!e.createByLead)return this.createError({path:"createBy",message:"Recipient Is required"})})),u=t.Ry().shape({folderName:t.Z_().required("Folder Name is required"),filename:t.Z_().min(2,"File Name Must Be At Least 2 Characters"),createBy:t.Z_().required()}),m=t.Ry({sender:t.Z_().required("Sender Is required"),recipient:t.Rx().required("Recipient Is required"),callDuration:t.Z_(),callNotes:t.Z_(),createBy:t.Z_(),createByLead:t.Z_(),category:t.Z_()}).test("createBy-or-createByLead-required","Recipient Is required",(function(e){if(!e.createBy&&!e.createByLead)return this.createError({path:"createBy",message:"Recipient Is required"})})),h=t.Ry({sender:t.Z_().min(1e9,"Phone number is invalid").max(999999999999,"Phone number is invalid").required("Sender Is required"),to:t.Z_().min(1e9,"Phone number is invalid").max(999999999999,"Phone number is invalid").required("To Is required"),message:t.Z_(),createFor:t.Z_().required("Create By Is required")}),x=t.Ry({title:t.Z_().required("Title Is required"),category:t.Z_(),description:t.Z_(),notes:t.Z_(),reminder:t.Z_(),start:t.Z_().required("Start Is required"),end:t.Z_(),backgroundColor:t.Z_(),borderColor:t.Z_(),textColor:t.Z_(),display:t.Z_(),url:t.Z_(),createBy:t.Z_()}),p=t.Ry({agenda:t.Z_().required("Agenda Is required"),attendes:t.IX().of(t.Z_().trim()),attendesLead:t.IX().of(t.Z_().trim()),location:t.Z_(),related:t.Z_(),dateTime:t.Z_().required("Date Time Is required"),notes:t.Z_(),createFor:t.Z_(),createdBy:t.Z_()})},5335:(e,r,i)=>{i.d(r,{Z:()=>c});var t=i(7917),n=i(2504),l=i(4220),a=i(2791),o=i(7689),s=i(1526),d=i(184);const c=e=>{const[r,i]=(0,a.useState)(!1),c=(0,o.s0)();return(0,d.jsx)("div",{children:(0,d.jsxs)(t.u_,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,d.jsx)(t.ZA,{}),(0,d.jsxs)(t.hz,{children:[(0,d.jsxs)(t.xB,{children:["Delete Contact","one"===e.method?"":"s"]}),(0,d.jsx)(t.ol,{}),(0,d.jsxs)(t.fe,{children:["Are You Sure To Delete selated Contact","one"===e.method?"":"s"," ?"]}),(0,d.jsxs)(t.mz,{children:[(0,d.jsx)(n.Button,{colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)try{i(!0);200===(await(0,s.ef)(e.url,e.id)).status&&c("/contacts")}catch(r){console.log(r)}finally{i(!1)}else if("many"===e.method)try{i(!0),200===(await(0,s.$f)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(r){console.log(r)}finally{i(!1)}},disabled:!!r,children:r?(0,d.jsx)(l.Z,{}):"Yes"}),(0,d.jsx)(n.Button,{variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})})}},445:(e,r,i)=>{i.d(r,{Z:()=>Z});var t=i(8227),n=i(8735),l=i(7005),a=i(2732),o=i(2791),s=i(1358),d=i(5272),c=i(3712),u=i(3252),m=i(7880),h=i(4220),x=i(6355),p=i(1087),v=i(6311),g=i(520),f=i(5335),j=i(184);function Z(e){const{columnsData:r,tableData:i,fetchData:Z,isLoding:b}=e,_=(0,t.ff)("secondaryGray.900","white"),y=(0,t.ff)("gray.200","whiteAlpha.100"),S=(0,o.useMemo)((()=>r),[r]),[C,q]=(0,o.useState)([]),[I,D]=(0,o.useState)(!1),[P,B]=(0,o.useState)(),[T,N]=(0,o.useState)(),w=(0,o.useMemo)((()=>i),[i]),z=JSON.parse(localStorage.getItem("user")),F=(0,s.useTable)({columns:S,data:w,initialState:{pageIndex:0}},s.useGlobalFilter,s.useSortBy,s.usePagination),{getTableProps:L,getTableBodyProps:R,headerGroups:k,prepareRow:W,page:O,canPreviousPage:A,canNextPage:E,pageOptions:G,pageCount:H,gotoPage:V,nextPage:M,previousPage:Y,setPageSize:U,state:{pageIndex:X,pageSize:J}}=F;G.length<T&&N(G.length);const[$,K]=(0,o.useState)(!1),[Q,ee]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{Z&&Z()}),[I,e.isOpen]),(0,j.jsxs)(c.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,j.jsx)(v.Z,{fetchData:Z,isOpen:$,onClose:K,id:P}),(0,j.jsx)(g.Z,{fetchData:Z,isOpen:Q,onClose:ee,id:P}),(0,j.jsxs)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,j.jsxs)(n.Text,{color:_,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Contacts (",(0,j.jsx)(u.Z,{targetNumber:null===w||void 0===w?void 0:w.length}),")"]}),C.length>0&&(0,j.jsx)(d.DeleteIcon,{onClick:()=>D(!0),color:"red"})]}),(0,j.jsx)(f.Z,{isOpen:I,onClose:D,setSelectedValues:q,url:"api/contact/deleteMany",data:C,method:"many"}),(0,j.jsx)(n.Box,{overflowY:"auto",className:"table-fix-container",children:(0,j.jsxs)(l.iA,{...L(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,j.jsx)(l.hr,{children:null===k||void 0===k?void 0:k.map(((e,r)=>{var i;return(0,o.createElement)(l.Tr,{...e.getHeaderGroupProps(),key:r},null===(i=e.headers)||void 0===i?void 0:i.map(((e,r)=>(0,o.createElement)(l.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:r,borderColor:y},(0,j.jsxs)(n.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,j.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,j.jsx)(x.sF,{}):(0,j.jsx)(x.h3_,{}):(0,j.jsx)(x.roE,{})})]})))))}))}),(0,j.jsx)(l.p3,{...R(),children:b?(0,j.jsx)(l.Tr,{children:(0,j.jsx)(l.Td,{colSpan:null===S||void 0===S?void 0:S.length,children:(0,j.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:_,fontSize:"sm",fontWeight:"700",children:(0,j.jsx)(h.Z,{})})})}):0===(null===w||void 0===w?void 0:w.length)?(0,j.jsx)(l.Tr,{children:(0,j.jsx)(l.Td,{colSpan:S.length,children:(0,j.jsx)(n.Text,{textAlign:"center",width:"100%",color:_,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):(null===w||void 0===w?void 0:w.length)>0&&(null===O||void 0===O?void 0:O.map(((e,r)=>{var i;return W(e),(0,o.createElement)(l.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:r},null===e||void 0===e||null===(i=e.cells)||void 0===i?void 0:i.map(((e,r)=>{let i="";var t;if("#"===(null===e||void 0===e?void 0:e.column.Header))i=(0,j.jsxs)(n.Flex,{align:"center",children:[(0,j.jsx)(a.XZ,{colorScheme:"brandScheme",value:C,isChecked:C.includes(null===e||void 0===e?void 0:e.value),onChange:r=>((e,r)=>{e.target.checked?q((e=>[...e,r])):q((e=>e.filter((e=>e!==r))))})(r,null===e||void 0===e?void 0:e.value),me:"10px"}),(0,j.jsx)(n.Text,{color:_,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.index)+1})]});else if("title"===(null===e||void 0===e?void 0:e.column.Header))i=(0,j.jsx)(n.Text,{me:"10px",color:_,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("first Name"===(null===e||void 0===e?void 0:e.column.Header)){var s,d;i=(0,j.jsx)(p.rU,{to:"admin"!==(null===z||void 0===z?void 0:z.role)?"/contactView/".concat(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.original._id):"/admin/contactView/".concat(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.original._id),children:(0,j.jsx)(n.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}else"last Name"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,j.jsx)(n.Text,{me:"10px",color:_,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}):"phone Number"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,j.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",onClick:()=>{var r;ee(!0),B(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.values._id)},color:"green.400",sx:{cursor:"pointer","&:hover":{color:"blue.500",textDecoration:"underline"}},children:null===e||void 0===e?void 0:e.value}):"Email Address"===(null===e||void 0===e?void 0:e.column.Header)?i=(0,j.jsx)(n.Text,{fontSize:"sm",fontWeight:"700",onClick:()=>{var r;K(!0),B(null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.values._id)},color:"green.400",sx:{cursor:"pointer","&:hover":{color:"blue.500",textDecoration:"underline"}},children:null===e||void 0===e?void 0:e.value}):("physical Address"===(null===e||void 0===e?void 0:e.column.Header)||"mailing Address"===(null===e||void 0===e?void 0:e.column.Header)||"Contact Method"===(null===e||void 0===e?void 0:e.column.Header))&&(i=(0,j.jsx)(n.Text,{color:_,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value}));return(0,o.createElement)(l.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:r,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},i)})))})))})]})}),(null===w||void 0===w?void 0:w.length)>5&&(0,j.jsx)(m.Z,{gotoPage:V,gopageValue:T,setGopageValue:N,pageCount:H,canPreviousPage:A,previousPage:Y,canNextPage:E,pageOptions:G,setPageSize:U,nextPage:M,pageSize:J,pageIndex:X})]})}},6311:(e,r,i)=>{i.d(r,{Z:()=>v});var t=i(7917),n=i(8735),l=i(3393),a=i(5798),o=i(6123),s=i(2504),d=i(4220),c=i(2506),u=i(2791),m=i(9126),h=i(2630),x=i(1526),p=i(184);const v=e=>{const{onClose:r,isOpen:i,fetchData:v}=e,g=JSON.parse(localStorage.getItem("user")),[f,j]=(0,u.useState)(!1),[Z,b]=(0,u.useState)(!1),[_,y]=(0,u.useState)(!1),S={sender:null===g||void 0===g?void 0:g._id,recipient:"",subject:"",message:"",createBy:"",createByLead:"",startDate:"",endDate:""},C=(0,c.TA)({initialValues:S,validationSchema:h.Io,onSubmit:(e,r)=>{let{resetForm:i}=r;w(),i()}}),{errors:q,touched:I,values:D,handleBlur:P,handleChange:B,handleSubmit:T,setFieldValue:N}=C,w=async()=>{try{j(!0),200===(await(0,x.Fv)("api/email/add",D)).status&&(e.onClose(),v())}catch(r){console.log(r)}finally{j(!1)}};return(0,u.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let l=await(0,x.ac)("api/contact/view/",e.id);var r,i,t,n;200===(null===l||void 0===l?void 0:l.status)&&(N("recipient",null===l||void 0===l||null===(r=l.data)||void 0===r||null===(i=r.contact)||void 0===i?void 0:i.email),N("createBy",e.id),D.recipient=null===l||void 0===l||null===(t=l.data)||void 0===t||null===(n=t.contact)||void 0===n?void 0:n.email)}else if(e.id&&"true"===e.lead){let r=await(0,x.ac)("api/lead/view/",e.id);var l,a,o,s;200===(null===r||void 0===r?void 0:r.status)&&(N("recipient",null===r||void 0===r||null===(l=r.data)||void 0===l||null===(a=l.lead)||void 0===a?void 0:a.leadEmail),N("createByLead",e.id),D.recipient=null===r||void 0===r||null===(o=r.data)||void 0===o||null===(s=o.lead)||void 0===s?void 0:s.leadEmail)}})()}),[e.id]),(0,p.jsxs)(t.u_,{onClose:r,isOpen:i,isCentered:!0,children:[(0,p.jsx)(t.ZA,{}),(0,p.jsxs)(t.hz,{children:[(0,p.jsx)(t.xB,{children:"Send Email "}),(0,p.jsx)(t.ol,{}),(0,p.jsx)(t.fe,{children:(0,p.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(a.Input,{fontSize:"sm",onChange:B,onBlur:P,value:D.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:q.recipient&&I.recipient?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",q.recipient&&I.recipient&&q.recipient]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Subject"}),(0,p.jsx)(a.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:B,onBlur:P,value:D.subject,name:"subject",fontWeight:"500",borderColor:q.subject&&I.subject?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",q.subject&&I.subject&&q.subject]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12,md:6},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,p.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:B,onBlur:P,value:D.startDate,name:"startDate",fontWeight:"500",borderColor:null!==q&&void 0!==q&&q.startDate&&null!==I&&void 0!==I&&I.startDate?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",q.startDate&&I.startDate&&q.startDate]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12,md:6},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,p.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:B,onBlur:P,value:D.endDate,name:"endDate",fontWeight:"500",borderColor:null!==q&&void 0!==q&&q.endDate&&null!==I&&void 0!==I&&I.endDate?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",q.endDate&&I.endDate&&q.endDate]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,p.jsx)(o.g,{fontSize:"sm",placeholder:"Here Type message",resize:"none",onChange:B,onBlur:P,value:D.message,name:"message",fontWeight:"500",borderColor:q.message&&I.message?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",q.message&&I.message&&q.message]})]})]})}),(0,p.jsxs)(t.mz,{children:[(0,p.jsx)(s.Button,{variant:"brand",onClick:T,rightIcon:(0,p.jsx)(m.nkP,{}),disabled:!!f,children:f?(0,p.jsx)(d.Z,{}):"Send"}),(0,p.jsx)(s.Button,{onClick:()=>{C.resetForm(),r()},children:"Close"})]})]})]})}},520:(e,r,i)=>{i.d(r,{Z:()=>v});var t=i(7917),n=i(8735),l=i(3393),a=i(5798),o=i(6123),s=i(2504),d=i(4220),c=i(2506),u=i(2791),m=i(9126),h=i(2630),x=i(1526),p=i(184);const v=e=>{const{onClose:r,isOpen:i,fetchData:v}=e,[g,f]=(0,u.useState)(!1),j=JSON.parse(localStorage.getItem("user")),Z={sender:null===j||void 0===j?void 0:j._id,recipient:"",callDuration:"",callNotes:"",createBy:"",createByLead:"",startDate:"",endDate:""},b=(0,c.TA)({initialValues:Z,validationSchema:h.Fv,onSubmit:(e,r)=>{let{resetForm:i}=r;P(),i()}}),{errors:_,touched:y,values:S,handleBlur:C,handleChange:q,handleSubmit:I,setFieldValue:D}=b,P=async()=>{try{f(!0),200===(await(0,x.Fv)("api/phoneCall/add",S)).status&&(e.onClose(),v())}catch(r){console.log(r)}finally{f(!1)}};return(0,u.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let l=await(0,x.ac)("api/contact/view/",e.id);var r,i,t,n;200===(null===l||void 0===l?void 0:l.status)&&(D("recipient",null===l||void 0===l||null===(r=l.data)||void 0===r||null===(i=r.contact)||void 0===i?void 0:i.phoneNumber),D("createBy",null===e||void 0===e?void 0:e.id),S.recipient=null===l||void 0===l||null===(t=l.data)||void 0===t||null===(n=t.contact)||void 0===n?void 0:n.phoneNumber)}else if(e.id&&"true"===e.lead){let r=await(0,x.ac)("api/lead/view/",e.id);var l,a,o,s;200===(null===r||void 0===r?void 0:r.status)&&(D("recipient",null===r||void 0===r||null===(l=r.data)||void 0===l||null===(a=l.lead)||void 0===a?void 0:a.leadPhoneNumber),D("createByLead",e.id),S.recipient=null===r||void 0===r||null===(o=r.data)||void 0===o||null===(s=o.lead)||void 0===s?void 0:s.leadPhoneNumber)}})()}),[e.id]),(0,p.jsxs)(t.u_,{onClose:r,isOpen:i,isCentered:!0,children:[(0,p.jsx)(t.ZA,{}),(0,p.jsxs)(t.hz,{children:[(0,p.jsx)(t.xB,{children:"Add Call "}),(0,p.jsx)(t.ol,{}),(0,p.jsx)(t.fe,{children:(0,p.jsxs)(n.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(a.Input,{fontSize:"sm",type:"number",onChange:q,onBlur:C,value:S.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:_.recipient&&y.recipient?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",_.recipient&&y.recipient&&_.recipient]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12,md:6},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,p.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:q,onBlur:C,value:S.startDate,name:"startDate",fontWeight:"500",borderColor:null!==_&&void 0!==_&&_.startDate&&null!==y&&void 0!==y&&y.startDate?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",_.startDate&&y.startDate&&_.startDate]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12,md:6},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,p.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:q,onBlur:C,value:S.endDate,name:"endDate",fontWeight:"500",borderColor:null!==_&&void 0!==_&&_.endDate&&null!==y&&void 0!==y&&y.endDate?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",_.endDate&&y.endDate&&_.endDate]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsxs)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,p.jsx)(n.Text,{color:"red",children:"*"})]}),(0,p.jsx)(a.Input,{fontSize:"sm",onChange:q,onBlur:C,value:S.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:_.callDuration&&y.callDuration?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",_.callDuration&&y.callDuration&&_.callDuration]})]}),(0,p.jsxs)(n.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(l.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,p.jsx)(o.g,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:q,onBlur:C,value:S.callNotes,name:"callNotes",fontWeight:"500",borderColor:_.callNotes&&y.callNotes?"red.300":null}),(0,p.jsxs)(n.Text,{mb:"10px",color:"red",children:[" ",_.callNotes&&y.callNotes&&_.callNotes]})]})]})}),(0,p.jsxs)(t.mz,{children:[(0,p.jsx)(s.Button,{variant:"brand",leftIcon:(0,p.jsx)(m.lfG,{}),disabled:!!g,onClick:I,children:g?(0,p.jsx)(d.Z,{}):"Call"}),(0,p.jsx)(s.Button,{onClick:()=>{b.resetForm(),r()},children:"Close"})]})]})]})}},6123:(e,r,i)=>{i.d(r,{g:()=>d});var t=i(3393),n=i(1938),l=i(6134),a=i(2791);function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},o.apply(this,arguments)}var s=["className","rows"],d=(0,n.Gp)((function(e,r){var i=(0,n.mq)("Textarea",e),d=(0,n.Lr)(e),c=d.className,u=d.rows,m=function(e,r){if(null==e)return{};var i,t,n={},l=Object.keys(e);for(t=0;t<l.length;t++)i=l[t],r.indexOf(i)>=0||(n[i]=e[i]);return n}(d,s),h=(0,t.useFormControl)(m),x=u?(0,l.CE)(i,["h","minH","height","minHeight"]):i;return a.createElement(n.m$.textarea,o({ref:r,rows:u},h,{className:(0,l.cx)("chakra-textarea",c),__css:x}))}));l.Ts&&(d.displayName="Textarea")}}]);
//# sourceMappingURL=445.310128c5.chunk.js.map