"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[5738],{8022:(e,a,l)=>{l.d(a,{Z:()=>x});var t=l(7917),o=l(8735),n=l(2504),i=l(2791),r=l(4128),s=l(1526),d=l(4220),c=l(8014),u=l(184);const x=e=>{const{onClose:a,isOpen:l,fieldName:x,setFieldValue:m}=e,[h,p]=(0,i.useState)(),[v,g]=(0,i.useState)(!1),[j,f]=(0,i.useState)([]),y=JSON.parse(localStorage.getItem("user"));return(0,i.useEffect)((()=>{(async()=>{g(!0);let e=await(0,s.ac)("admin"===y.role?"api/contact/":"api/contact/?createBy=".concat(y._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),g(!1)})()}),[]),(0,u.jsxs)(t.u_,{onClose:a,size:"full",isOpen:l,children:[(0,u.jsx)(t.ZA,{}),(0,u.jsxs)(t.hz,{children:[(0,u.jsx)(t.xB,{children:"Select Contact"}),(0,u.jsx)(t.ol,{}),(0,u.jsx)(t.fe,{children:v?(0,u.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(d.Z,{})}):(0,u.jsx)(r.Z,{tableData:j,selectedValues:h,setSelectedValues:p,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,u.jsxs)(t.mz,{children:[(0,u.jsxs)(n.Button,{variant:"brand",onClick:async()=>{try{g(!0),m(x,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!v,leftIcon:(0,u.jsx)(c.EAI,{}),children:[" ",v?(0,u.jsx)(d.Z,{}):"Select"]}),(0,u.jsx)(n.Button,{onClick:()=>a(),children:"Close"})]})]})]})}},3354:(e,a,l)=>{l.d(a,{Z:()=>x});var t=l(7917),o=l(8735),n=l(2504),i=l(2791),r=l(8470),s=l(1526),d=l(4220),c=l(8014),u=l(184);const x=e=>{const{onClose:a,isOpen:l,fieldName:x,setFieldValue:m}=e,[h,p]=(0,i.useState)(),[v,g]=(0,i.useState)(!1),[j,f]=(0,i.useState)([]),y=JSON.parse(localStorage.getItem("user"));return(0,i.useEffect)((()=>{(async()=>{g(!0);let e=await(0,s.ac)("admin"===y.role?"api/lead/":"api/lead/?createBy=".concat(y._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),g(!1)})()}),[]),(0,u.jsxs)(t.u_,{onClose:a,size:"full",isOpen:l,children:[(0,u.jsx)(t.ZA,{}),(0,u.jsxs)(t.hz,{children:[(0,u.jsx)(t.xB,{children:"Select Lead"}),(0,u.jsx)(t.ol,{}),(0,u.jsx)(t.fe,{children:v?(0,u.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(d.Z,{})}):(0,u.jsx)(r.Z,{tableData:j,selectedValues:h,setSelectedValues:p,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,u.jsxs)(t.mz,{children:[(0,u.jsxs)(n.Button,{variant:"brand",onClick:async()=>{try{g(!0),m(x,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!v,leftIcon:(0,u.jsx)(c.EAI,{}),children:[" ",v?(0,u.jsx)(d.Z,{}):"Select"]}),(0,u.jsx)(n.Button,{onClick:()=>a(),children:"Close"})]})]})]})}},65:(e,a,l)=>{l.r(a),l.d(a,{default:()=>P});var t=l(5223),o=l(8735),n=l(2504),i=l(8227),r=l(7005),s=l(2791),d=l(1358),c=l(3712),u=l(6355),x=l(1087),m=l(3252),h=l(7880),p=l(4220),v=l(2426),g=l.n(v),j=l(1526),f=l(184);function y(e){const{columnsData:a}=e,l=(0,i.ff)("secondaryGray.900","white"),t=(0,i.ff)("gray.200","whiteAlpha.100"),n=(0,s.useMemo)((()=>a),[a]),[v,y]=(0,s.useState)([]),S=JSON.parse(localStorage.getItem("user")),[b,C]=(0,s.useState)(!1),[B,w]=(0,s.useState)(),N=(0,d.useTable)({columns:n,data:v,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:z,getTableBodyProps:D,headerGroups:L,prepareRow:T,page:I,canPreviousPage:H,canNextPage:F,pageOptions:P,pageCount:W,gotoPage:A,nextPage:O,previousPage:_,setPageSize:k,state:{pageIndex:E,pageSize:Z}}=N;return P.length<B&&w(P.length),(0,s.useEffect)((()=>{(async()=>{C(!0);let e=await(0,j.ac)("admin"===S.role?"api/phoneCall":"api/phoneCall?sender=".concat(S._id));y(null===e||void 0===e?void 0:e.data),C(!1)})()}),[e.isOpen]),(0,f.jsxs)(c.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,f.jsx)(o.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,f.jsxs)(o.Text,{color:l,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Calls (",(0,f.jsx)(m.Z,{targetNumber:null===v||void 0===v?void 0:v.length}),")"]})}),(0,f.jsx)(o.Box,{overflowY:"auto",className:"table-fix-container",children:(0,f.jsxs)(r.iA,{...z(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(r.hr,{children:null===L||void 0===L?void 0:L.map(((e,a)=>{var l;return(0,s.createElement)(r.Tr,{...e.getHeaderGroupProps(),key:a},null===(l=e.headers)||void 0===l?void 0:l.map(((e,a)=>(0,s.createElement)(r.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:a,borderColor:t},(0,f.jsxs)(o.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,f.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,f.jsx)(u.sF,{}):(0,f.jsx)(u.h3_,{}):(0,f.jsx)(u.roE,{})})]})))))}))}),(0,f.jsx)(r.p3,{...D(),children:b?(0,f.jsx)(r.Tr,{children:(0,f.jsx)(r.Td,{colSpan:null===n||void 0===n?void 0:n.length,children:(0,f.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:l,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(p.Z,{})})})}):0===(null===v||void 0===v?void 0:v.length)?(0,f.jsx)(r.Tr,{children:(0,f.jsx)(r.Td,{colSpan:n.length,children:(0,f.jsx)(o.Text,{textAlign:"center",width:"100%",color:l,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):null===I||void 0===I?void 0:I.map(((e,a)=>{var t;return T(e),(0,s.createElement)(r.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:a},null===e||void 0===e||null===(t=e.cells)||void 0===t?void 0:t.map(((e,a)=>{let t="";var n;if("#"===(null===e||void 0===e?void 0:e.column.Header))t=(0,f.jsx)(o.Flex,{align:"center",children:(0,f.jsx)(o.Text,{color:l,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.index)+1})});else if("sender"===(null===e||void 0===e?void 0:e.column.Header)){var i,d;t=(0,f.jsx)(x.rU,{to:"admin"!==(null===S||void 0===S?void 0:S.role)?"/phone-call/".concat(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.values._id):"/admin/phone-call/".concat(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.values._id),children:(0,f.jsx)(o.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "})})}else if("recipient"===(null===e||void 0===e?void 0:e.column.Header))t=(0,f.jsx)(o.Text,{me:"10px",color:l,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "});else if("Realeted To"===(null===e||void 0===e?void 0:e.column.Header)){var c,u,m,h,p,v,j,y;t=(0,f.jsx)(x.rU,{to:null!==e&&void 0!==e&&null!==(c=e.row)&&void 0!==c&&null!==(u=c.original)&&void 0!==u&&u.createBy?"admin"!==(null===S||void 0===S?void 0:S.role)?"/contactView/".concat(null===e||void 0===e||null===(m=e.row)||void 0===m?void 0:m.original.createBy):"/admin/contactView/".concat(null===e||void 0===e||null===(h=e.row)||void 0===h?void 0:h.original.createBy):"admin"!==(null===S||void 0===S?void 0:S.role)?"/leadView/".concat(null===e||void 0===e||null===(p=e.row)||void 0===p?void 0:p.original.createByLead):"/admin/leadView/".concat(null===e||void 0===e||null===(v=e.row)||void 0===v?void 0:v.original.createByLead),children:(0,f.jsx)(o.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(j=e.row)&&void 0!==j&&j.original.createBy?"contact":(null===e||void 0===e||null===(y=e.row)||void 0===y?void 0:y.original.createByLead)&&"lead"})})}else if("timestamp"===(null===e||void 0===e?void 0:e.column.Header))t=(0,f.jsx)(o.Text,{color:l,fontSize:"sm",fontWeight:"700",children:g()(null===e||void 0===e?void 0:e.value).toNow()});else if("Created"===(null===e||void 0===e?void 0:e.column.Header)){var b;t=(0,f.jsx)(o.Text,{color:l,fontSize:"sm",fontWeight:"700",children:g()(null===e||void 0===e||null===(b=e.row)||void 0===b?void 0:b.values.timestamp).format("(DD/MM) h:mma")})}return(0,s.createElement)(r.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},t)})))}))})]})}),(null===v||void 0===v?void 0:v.length)>5&&(0,f.jsx)(h.Z,{gotoPage:A,gopageValue:B,setGopageValue:w,pageCount:W,canPreviousPage:H,previousPage:_,canNextPage:F,pageOptions:P,setPageSize:k,nextPage:O,pageSize:Z,pageIndex:E})]})}var S=l(5272),b=l(7917),C=l(3393),B=l(3445),w=l(7640),N=l(5798),z=l(6123),D=l(8022),L=l(3354),T=l(2506),I=l(1545),H=l(2630);const F=e=>{const{onClose:a,isOpen:l,fetchData:t}=e,[i,r]=(0,s.useState)(!1),[d,c]=(0,s.useState)([]),[u,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),v=JSON.parse(localStorage.getItem("user")),g={sender:null===v||void 0===v?void 0:v._id,recipient:"",callDuration:"",callNotes:"",createBy:"",createByLead:"",startDate:new Date,endDate:"",category:"contact",assignmentTo:"",assignmentToLead:""},y=(0,T.TA)({initialValues:g,validationSchema:H.Fv,onSubmit:(e,a)=>{let{resetForm:l}=a;E(),l()}}),{errors:F,touched:P,values:W,handleBlur:A,handleChange:O,handleSubmit:_,setFieldValue:k}=y,E=async()=>{try{r(!0),200===(await(0,j.Fv)("api/phoneCall/add",W)).status&&(e.onClose(),t())}catch(a){console.log(a)}finally{r(!1)}};(0,s.useEffect)((async()=>{W.start=null===e||void 0===e?void 0:e.date;try{var a;let e;"contact"===W.category?e=await(0,j.ac)("admin"===v.role?"api/contact/":"api/contact/?createBy=".concat(v._id)):"lead"===W.category&&(e=await(0,j.ac)("admin"===v.role?"api/lead/":"api/lead/?createBy=".concat(v._id))),c(null===(a=e)||void 0===a?void 0:a.data)}catch(l){console.log(l)}}),[e,W.category]);return(0,s.useEffect)((()=>{(async()=>{if(W.createBy){let o=await(0,j.ac)("api/contact/view/",W.createBy);var e,a,l,t;200===(null===o||void 0===o?void 0:o.status)&&(k("recipient",null===o||void 0===o||null===(e=o.data)||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.phoneNumber),W.recipient=null===o||void 0===o||null===(l=o.data)||void 0===l||null===(t=l.contact)||void 0===t?void 0:t.phoneNumber)}else if(W.createByLead){let e=await(0,j.ac)("api/lead/view/",W.createByLead);var o,n,i,r;200===(null===e||void 0===e?void 0:e.status)&&(k("recipient",null===e||void 0===e||null===(o=e.data)||void 0===o||null===(n=o.lead)||void 0===n?void 0:n.leadPhoneNumber),W.recipient=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(r=i.lead)||void 0===r?void 0:r.leadPhoneNumber)}})()}),[W.createBy,W.createByLead]),(0,f.jsxs)(b.u_,{onClose:a,isOpen:l,isCentered:!0,children:[(0,f.jsx)(b.ZA,{}),(0,f.jsxs)(b.hz,{children:[(0,f.jsx)(b.xB,{children:"Add Call "}),(0,f.jsx)(b.ol,{}),(0,f.jsxs)(b.fe,{children:[(0,f.jsx)(D.Z,{isOpen:u,onClose:x,fieldName:"createBy",setFieldValue:k}),(0,f.jsx)(L.Z,{isOpen:m,onClose:h,fieldName:"createByLead",setFieldValue:k}),(0,f.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,f.jsx)(B.Ee,{onChange:e=>{k("category",e),k("createBy",""),k("createByLead","")},value:W.category,children:(0,f.jsxs)(o.Stack,{direction:"row",children:[(0,f.jsx)(B.Y8,{value:"contact",children:"Contact"}),(0,f.jsx)(B.Y8,{value:"lead",children:"Lead"})]})}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.category&&P.category&&F.category]})]}),(0,f.jsx)(o.GridItem,{colSpan:{base:12},children:"contact"===W.category?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient  (Contact)"}),(0,f.jsxs)(o.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(w.Ph,{value:W.createBy,name:"createBy",onChange:O,mb:F.createBy&&P.createBy?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:F.createBy&&P.createBy?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,f.jsx)("option",{value:e._id,children:"contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,f.jsx)(n.IconButton,{onClick:()=>x(!0),ml:2,fontSize:"25px",icon:(0,f.jsx)(I.zrj,{})})]}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.createBy&&P.createBy&&F.createBy]})]})}):"lead"===W.category?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,f.jsxs)(o.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(w.Ph,{value:W.createByLead,name:"createByLead",onChange:O,mb:F.createByLead&&P.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:F.createByLead&&P.createByLead?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,f.jsx)("option",{value:e._id,children:"contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,f.jsx)(n.IconButton,{onClick:()=>h(!0),ml:2,fontSize:"25px",icon:(0,f.jsx)(I.zrj,{})})]}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.createByLead&&P.createByLead&&F.createByLead]})]})}):""}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,f.jsx)(o.Text,{color:"red",children:"*"})]}),(0,f.jsx)(N.Input,{fontSize:"sm",disabled:!0,value:W.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:F.recipient&&P.recipient?"red.300":null})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,f.jsx)(N.Input,{type:"datetime-local",fontSize:"sm",onChange:O,onBlur:A,value:W.startDate,name:"startDate",fontWeight:"500",borderColor:null!==F&&void 0!==F&&F.startDate&&null!==P&&void 0!==P&&P.startDate?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.startDate&&P.startDate&&F.startDate]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,f.jsx)(N.Input,{type:"datetime-local",fontSize:"sm",onChange:O,onBlur:A,value:W.endDate,name:"endDate",fontWeight:"500",borderColor:null!==F&&void 0!==F&&F.endDate&&null!==P&&void 0!==P&&P.endDate?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.endDate&&P.endDate&&F.endDate]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,f.jsx)(o.Text,{color:"red",children:"*"})]}),(0,f.jsx)(N.Input,{fontSize:"sm",onChange:O,onBlur:A,value:W.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:F.callDuration&&P.callDuration?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.callDuration&&P.callDuration&&F.callDuration]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,f.jsx)(z.g,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:O,onBlur:A,value:W.callNotes,name:"callNotes",fontWeight:"500",borderColor:F.callNotes&&P.callNotes?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.callNotes&&P.callNotes&&F.callNotes]})]})]})]}),(0,f.jsxs)(b.mz,{children:[(0,f.jsx)(n.Button,{variant:"brand",leftIcon:(0,f.jsx)(S.AddIcon,{}),disabled:!!i,onClick:_,children:i?(0,f.jsx)(p.Z,{}):"Add"}),(0,f.jsx)(n.Button,{onClick:()=>{y.resetForm(),a()},children:"Close"})]})]})]})},P=()=>{const{isOpen:e,onOpen:a,onClose:l}=(0,t.qY)();return(0,f.jsxs)("div",{children:[(0,f.jsx)(o.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:1,children:(0,f.jsx)(o.GridItem,{colStart:6,textAlign:"right",children:(0,f.jsx)(n.Button,{onClick:()=>{a()},leftIcon:(0,f.jsx)(S.AddIcon,{}),variant:"brand",children:"Add"})})}),(0,f.jsx)(y,{isOpen:e,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"sender",accessor:"senderName"},{Header:"recipient",accessor:"createByName"},{Header:"Realeted To"},{Header:"timestamp",accessor:"timestamp"},{Header:"Created"}]}),(0,f.jsx)(F,{isOpen:e,size:"lg",onClose:l})]})}}}]);
//# sourceMappingURL=5738.3d3c5f5a.chunk.js.map