"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[8294],{8022:(e,a,t)=>{t.d(a,{Z:()=>x});var l=t(7917),o=t(8735),n=t(2504),i=t(2791),s=t(4128),r=t(1526),d=t(4220),c=t(8014),u=t(184);const x=e=>{const{onClose:a,isOpen:t,fieldName:x,setFieldValue:m}=e,[h,p]=(0,i.useState)(),[v,g]=(0,i.useState)(!1),[j,f]=(0,i.useState)([]),y=JSON.parse(localStorage.getItem("user"));return(0,i.useEffect)((()=>{(async()=>{g(!0);let e=await(0,r.ac)("admin"===y.role?"api/contact/":"api/contact/?createBy=".concat(y._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),g(!1)})()}),[]),(0,u.jsxs)(l.u_,{onClose:a,size:"full",isOpen:t,children:[(0,u.jsx)(l.ZA,{}),(0,u.jsxs)(l.hz,{children:[(0,u.jsx)(l.xB,{children:"Select Contact"}),(0,u.jsx)(l.ol,{}),(0,u.jsx)(l.fe,{children:v?(0,u.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(d.Z,{})}):(0,u.jsx)(s.Z,{tableData:j,selectedValues:h,setSelectedValues:p,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,u.jsxs)(l.mz,{children:[(0,u.jsxs)(n.Button,{variant:"brand",onClick:async()=>{try{g(!0),m(x,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!v,leftIcon:(0,u.jsx)(c.EAI,{}),children:[" ",v?(0,u.jsx)(d.Z,{}):"Select"]}),(0,u.jsx)(n.Button,{onClick:()=>a(),children:"Close"})]})]})]})}},3354:(e,a,t)=>{t.d(a,{Z:()=>x});var l=t(7917),o=t(8735),n=t(2504),i=t(2791),s=t(8470),r=t(1526),d=t(4220),c=t(8014),u=t(184);const x=e=>{const{onClose:a,isOpen:t,fieldName:x,setFieldValue:m}=e,[h,p]=(0,i.useState)(),[v,g]=(0,i.useState)(!1),[j,f]=(0,i.useState)([]),y=JSON.parse(localStorage.getItem("user"));return(0,i.useEffect)((()=>{(async()=>{g(!0);let e=await(0,r.ac)("admin"===y.role?"api/lead/":"api/lead/?createBy=".concat(y._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),g(!1)})()}),[]),(0,u.jsxs)(l.u_,{onClose:a,size:"full",isOpen:t,children:[(0,u.jsx)(l.ZA,{}),(0,u.jsxs)(l.hz,{children:[(0,u.jsx)(l.xB,{children:"Select Lead"}),(0,u.jsx)(l.ol,{}),(0,u.jsx)(l.fe,{children:v?(0,u.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,u.jsx)(d.Z,{})}):(0,u.jsx)(s.Z,{tableData:j,selectedValues:h,setSelectedValues:p,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,u.jsxs)(l.mz,{children:[(0,u.jsxs)(n.Button,{variant:"brand",onClick:async()=>{try{g(!0),m(x,h),a()}catch(e){console.log(e)}finally{g(!1)}},disabled:!!v,leftIcon:(0,u.jsx)(c.EAI,{}),children:[" ",v?(0,u.jsx)(d.Z,{}):"Select"]}),(0,u.jsx)(n.Button,{onClick:()=>a(),children:"Close"})]})]})]})}},4251:(e,a,t)=>{t.r(a),t.d(a,{default:()=>P});var l=t(5223),o=t(8735),n=t(2504),i=t(8227),s=t(7005),r=t(2791),d=t(1358),c=t(3712),u=t(6355),x=t(1087),m=t(3252),h=t(7880),p=t(4220),v=t(2426),g=t.n(v),j=t(1526),f=t(184);function y(e){const{columnsData:a}=e,t=(0,i.ff)("secondaryGray.900","white"),l=(0,i.ff)("gray.200","whiteAlpha.100"),n=(0,r.useMemo)((()=>a),[a]),[v,y]=(0,r.useState)([]),b=JSON.parse(localStorage.getItem("user")),[S,C]=(0,r.useState)(!1),[B,w]=(0,r.useState)(),z=(0,d.useTable)({columns:n,data:v,initialState:{pageIndex:0}},d.useGlobalFilter,d.useSortBy,d.usePagination),{getTableProps:I,getTableBodyProps:L,headerGroups:N,prepareRow:T,page:H,canPreviousPage:D,canNextPage:F,pageOptions:P,pageCount:W,gotoPage:A,nextPage:E,previousPage:O,setPageSize:_,state:{pageIndex:k,pageSize:Z}}=z;return P.length<B&&w(P.length),(0,r.useEffect)((()=>{(async()=>{C(!0);let e=await(0,j.ac)("admin"===b.role?"api/email/":"api/email/?sender=".concat(b._id));y(null===e||void 0===e?void 0:e.data),C(!1)})()}),[e.isOpen]),(0,f.jsxs)(c.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,f.jsx)(o.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:(0,f.jsxs)(o.Text,{color:t,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Emails (",(0,f.jsx)(m.Z,{targetNumber:null===v||void 0===v?void 0:v.length}),")"]})}),(0,f.jsx)(o.Box,{overflowY:"auto",className:"table-fix-container",children:(0,f.jsxs)(s.iA,{...I(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(s.hr,{children:null===N||void 0===N?void 0:N.map(((e,a)=>{var t;return(0,r.createElement)(s.Tr,{...e.getHeaderGroupProps(),key:a},null===(t=e.headers)||void 0===t?void 0:t.map(((e,a)=>(0,r.createElement)(s.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:a,borderColor:l},(0,f.jsxs)(o.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,f.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,f.jsx)(u.sF,{}):(0,f.jsx)(u.h3_,{}):(0,f.jsx)(u.roE,{})})]})))))}))}),(0,f.jsx)(s.p3,{...L(),children:S?(0,f.jsx)(s.Tr,{children:(0,f.jsx)(s.Td,{colSpan:null===n||void 0===n?void 0:n.length,children:(0,f.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:t,fontSize:"sm",fontWeight:"700",children:(0,f.jsx)(p.Z,{})})})}):0===(null===v||void 0===v?void 0:v.length)?(0,f.jsx)(s.Tr,{children:(0,f.jsx)(s.Td,{colSpan:n.length,children:(0,f.jsx)(o.Text,{textAlign:"center",width:"100%",color:t,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):null===H||void 0===H?void 0:H.map(((e,a)=>{var l;return T(e),(0,r.createElement)(s.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:a},null===e||void 0===e||null===(l=e.cells)||void 0===l?void 0:l.map(((e,a)=>{let l="";var n;if("#"===(null===e||void 0===e?void 0:e.column.Header))l=(0,f.jsx)(o.Flex,{align:"center",children:(0,f.jsx)(o.Text,{color:t,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.index)+1})});else if("sender Name"===(null===e||void 0===e?void 0:e.column.Header))l=(0,f.jsx)(o.Text,{me:"10px",color:t,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "});else if("recipient"===(null===e||void 0===e?void 0:e.column.Header)){var i,d;l=(0,f.jsx)(x.rU,{to:"admin"!==(null===b||void 0===b?void 0:b.role)?"/Email/".concat(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.values._id):"/admin/Email/".concat(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.values._id),children:(0,f.jsx)(o.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})}else if("Realeted To"===(null===e||void 0===e?void 0:e.column.Header)){var c,u,m,h,p,v,j,y;l=(0,f.jsx)(x.rU,{to:null!==e&&void 0!==e&&null!==(c=e.row)&&void 0!==c&&null!==(u=c.original)&&void 0!==u&&u.createBy?"admin"!==(null===b||void 0===b?void 0:b.role)?"/contactView/".concat(null===e||void 0===e||null===(m=e.row)||void 0===m?void 0:m.original.createBy):"/admin/contactView/".concat(null===e||void 0===e||null===(h=e.row)||void 0===h?void 0:h.original.createBy):"admin"!==(null===b||void 0===b?void 0:b.role)?"/leadView/".concat(null===e||void 0===e||null===(p=e.row)||void 0===p?void 0:p.original.createByLead):"/admin/leadView/".concat(null===e||void 0===e||null===(v=e.row)||void 0===v?void 0:v.original.createByLead),children:(0,f.jsx)(o.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&null!==(j=e.row)&&void 0!==j&&j.original.createBy?"contact":(null===e||void 0===e||null===(y=e.row)||void 0===y?void 0:y.original.createByLead)&&"lead"})})}else if("timestamp"===(null===e||void 0===e?void 0:e.column.Header))l=(0,f.jsx)(o.Text,{color:t,fontSize:"sm",fontWeight:"700",children:g()(null===e||void 0===e?void 0:e.value).toNow()});else if("Created"===(null===e||void 0===e?void 0:e.column.Header)){var S;l=(0,f.jsx)(o.Text,{color:t,fontSize:"sm",fontWeight:"700",children:g()(null===e||void 0===e||null===(S=e.row)||void 0===S?void 0:S.values.timestamp).format("(DD/MM) h:mma")})}return(0,r.createElement)(s.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:a,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},l)})))}))})]})}),(null===v||void 0===v?void 0:v.length)>5&&(0,f.jsx)(h.Z,{gotoPage:A,gopageValue:B,setGopageValue:w,pageCount:W,canPreviousPage:D,previousPage:O,canNextPage:F,pageOptions:P,setPageSize:_,nextPage:E,pageSize:Z,pageIndex:k})]})}var b=t(5272),S=t(7917),C=t(3393),B=t(3445),w=t(7640),z=t(5798),I=t(6123),L=t(8022),N=t(3354),T=t(2506),H=t(1545),D=t(2630);const F=e=>{const{onClose:a,isOpen:t,fetchData:l}=e,[i,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),[u,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),v=JSON.parse(localStorage.getItem("user")),g={sender:null===v||void 0===v?void 0:v._id,recipient:"",subject:"",callNotes:"",createBy:"",createByLead:"",startDate:new Date,endDate:"",category:"contact",assignmentTo:"",assignmentToLead:""},y=(0,T.TA)({initialValues:g,validationSchema:D.Io,onSubmit:(e,a)=>{let{resetForm:t}=a;k(),t()}}),{errors:F,touched:P,values:W,handleBlur:A,handleChange:E,handleSubmit:O,setFieldValue:_}=y,k=async()=>{try{s(!0),200===(await(0,j.Fv)("api/email/add",W)).status&&(e.onClose(),l())}catch(a){console.log(a)}finally{s(!1)}};(0,r.useEffect)((async()=>{W.start=null===e||void 0===e?void 0:e.date;try{var a;let e;"contact"===W.category?e=await(0,j.ac)("admin"===v.role?"api/contact/":"api/contact/?createBy=".concat(v._id)):"lead"===W.category&&(e=await(0,j.ac)("admin"===v.role?"api/lead/":"api/lead/?createBy=".concat(v._id))),c(null===(a=e)||void 0===a?void 0:a.data)}catch(t){console.log(t)}}),[e,W.category]);return(0,r.useEffect)((()=>{(async()=>{if(W.createBy){let o=await(0,j.ac)("api/contact/view/",W.createBy);var e,a,t,l;200===(null===o||void 0===o?void 0:o.status)&&(_("recipient",null===o||void 0===o||null===(e=o.data)||void 0===e||null===(a=e.contact)||void 0===a?void 0:a.email),W.recipient=null===o||void 0===o||null===(t=o.data)||void 0===t||null===(l=t.contact)||void 0===l?void 0:l.email)}else if(W.createByLead){let e=await(0,j.ac)("api/lead/view/",W.createByLead);var o,n,i,s;200===(null===e||void 0===e?void 0:e.status)&&(_("recipient",null===e||void 0===e||null===(o=e.data)||void 0===o||null===(n=o.lead)||void 0===n?void 0:n.leadEmail),W.recipient=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(s=i.lead)||void 0===s?void 0:s.leadEmail)}})()}),[W.createBy,W.createByLead]),(0,f.jsxs)(S.u_,{onClose:a,isOpen:t,isCentered:!0,children:[(0,f.jsx)(S.ZA,{}),(0,f.jsxs)(S.hz,{children:[(0,f.jsx)(S.xB,{children:"Add Email "}),(0,f.jsx)(S.ol,{}),(0,f.jsxs)(S.fe,{children:[(0,f.jsx)(L.Z,{isOpen:u,onClose:x,fieldName:"createBy",setFieldValue:_}),(0,f.jsx)(N.Z,{isOpen:m,onClose:h,fieldName:"createByLead",setFieldValue:_}),(0,f.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Related"}),(0,f.jsx)(B.Ee,{onChange:e=>{_("category",e),_("createBy",""),_("createByLead","")},value:W.category,children:(0,f.jsxs)(o.Stack,{direction:"row",children:[(0,f.jsx)(B.Y8,{value:"contact",children:"Contact"}),(0,f.jsx)(B.Y8,{value:"lead",children:"Lead"})]})}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.category&&P.category&&F.category]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:["contact"===W.category?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient  (Contact)"}),(0,f.jsxs)(o.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(w.Ph,{value:W.createBy,name:"createBy",onChange:E,mb:F.createBy&&P.createBy?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:F.createBy&&P.createBy?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,f.jsx)("option",{value:e._id,children:"contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,f.jsx)(n.IconButton,{onClick:()=>x(!0),ml:2,fontSize:"25px",icon:(0,f.jsx)(H.zrj,{})})]})]})}):"lead"===W.category?(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Recipient (Lead)"}),(0,f.jsxs)(o.Flex,{justifyContent:"space-between",children:[(0,f.jsx)(w.Ph,{value:W.createByLead,name:"createByLead",onChange:E,mb:F.createByLead&&P.createByLead?void 0:"10px",fontWeight:"500",placeholder:"Assignment To",borderColor:F.createByLead&&P.createByLead?"red.300":null,children:null===d||void 0===d?void 0:d.map((e=>(0,f.jsx)("option",{value:e._id,children:"contact"===W.category?"".concat(e.firstName," ").concat(e.lastName):e.leadName},e._id)))}),(0,f.jsx)(n.IconButton,{onClick:()=>h(!0),ml:2,fontSize:"25px",icon:(0,f.jsx)(H.zrj,{})})]})]})}):"",(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.createBy&&P.createBy&&F.createBy]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,f.jsx)(o.Text,{color:"red",children:"*"})]}),(0,f.jsx)(z.Input,{fontSize:"sm",disabled:!0,value:W.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:F.recipient&&P.recipient?"red.300":null})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,f.jsx)(z.Input,{type:"datetime-local",fontSize:"sm",onChange:E,onBlur:A,value:W.startDate,name:"startDate",fontWeight:"500",borderColor:null!==F&&void 0!==F&&F.startDate&&null!==P&&void 0!==P&&P.startDate?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.startDate&&P.startDate&&F.startDate]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12,md:6},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,f.jsx)(z.Input,{type:"datetime-local",fontSize:"sm",onChange:E,onBlur:A,value:W.endDate,name:"endDate",fontWeight:"500",borderColor:null!==F&&void 0!==F&&F.endDate&&null!==P&&void 0!==P&&P.endDate?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.endDate&&P.endDate&&F.endDate]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsxs)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Subject",(0,f.jsx)(o.Text,{color:"red",children:"*"})]}),(0,f.jsx)(z.Input,{fontSize:"sm",onChange:E,onBlur:A,value:W.subject,name:"subject",placeholder:"subject",fontWeight:"500",borderColor:F.subject&&P.subject?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.subject&&P.subject&&F.subject]})]}),(0,f.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,f.jsx)(C.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,f.jsx)(I.g,{resize:"none",fontSize:"sm",placeholder:"Enter Message",onChange:E,onBlur:A,value:W.message,name:"message",fontWeight:"500",borderColor:F.message&&P.message?"red.300":null}),(0,f.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",F.message&&P.message&&F.message]})]})]})]}),(0,f.jsxs)(S.mz,{children:[(0,f.jsx)(n.Button,{variant:"brand",leftIcon:(0,f.jsx)(b.AddIcon,{}),disabled:!!i,onClick:O,children:i?(0,f.jsx)(p.Z,{}):"Add"}),(0,f.jsx)(n.Button,{onClick:()=>{y.resetForm(),a()},children:"Close"})]})]})]})},P=()=>{const{isOpen:e,onOpen:a,onClose:t}=(0,l.qY)();return(0,f.jsxs)("div",{children:[(0,f.jsx)(o.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:1,children:(0,f.jsx)(o.GridItem,{colStart:6,textAlign:"right",children:(0,f.jsx)(n.Button,{onClick:()=>{a()},leftIcon:(0,f.jsx)(b.AddIcon,{}),variant:"brand",children:"Add"})})}),(0,f.jsx)(y,{isOpen:e,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"sender Name",accessor:"senderName"},{Header:"recipient",accessor:"createByName"},{Header:"Realeted To"},{Header:"timestamp",accessor:"timestamp"},{Header:"Created"}]}),(0,f.jsx)(F,{isOpen:e,size:"lg",onClose:t})]})}}}]);
//# sourceMappingURL=8294.f28c9706.chunk.js.map