"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[5339],{2964:(e,t,a)=>{a.d(t,{Z:()=>I});var l=a(5272),n=a(7917),o=a(8735),s=a(3393),d=a(5798),i=a(3445),r=a(2504),c=a(6123),u=a(7555),x=a(2791),m=a(4128),h=a(1526),p=a(4220),g=a(8014),j=a(184);const v=e=>{const{onClose:t,isOpen:a,fieldName:l,setFieldValue:s}=e,[d,i]=(0,x.useState)([]),[c,u]=(0,x.useState)(!1),[v,f]=(0,x.useState)([]),S=JSON.parse(localStorage.getItem("user")),b=[...new Set(d)];return(0,x.useEffect)((()=>{(async()=>{u(!0);let e=await(0,h.ac)("admin"===S.role?"api/contact/":"api/contact/?createBy=".concat(S._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),u(!1)})()}),[]),(0,j.jsxs)(n.u_,{onClose:t,size:"full",isOpen:a,children:[(0,j.jsx)(n.ZA,{}),(0,j.jsxs)(n.hz,{children:[(0,j.jsx)(n.xB,{children:"Select Contact"}),(0,j.jsx)(n.ol,{}),(0,j.jsx)(n.fe,{children:c?(0,j.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,j.jsx)(p.Z,{})}):(0,j.jsx)(m.Z,{tableData:v,type:"multi",selectedValues:d,setSelectedValues:i,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,j.jsxs)(n.mz,{children:[(0,j.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{u(!0),s(l,b),t()}catch(e){console.log(e)}finally{u(!1)}},disabled:!!c,leftIcon:(0,j.jsx)(g.EAI,{}),children:[" ",c?(0,j.jsx)(p.Z,{}):"Select"]}),(0,j.jsx)(r.Button,{onClick:()=>t(),children:"Close"})]})]})]})};var f=a(8470);const S=e=>{const{onClose:t,isOpen:a,fieldName:l,setFieldValue:s}=e,[d,i]=(0,x.useState)([]),[c,u]=(0,x.useState)(!1),[m,v]=(0,x.useState)([]),S=JSON.parse(localStorage.getItem("user")),b=[...new Set(d)];return(0,x.useEffect)((()=>{(async()=>{u(!0);let e=await(0,h.ac)("admin"===S.role?"api/lead/":"api/lead/?createBy=".concat(S._id));e&&200==e.status&&v(null===e||void 0===e?void 0:e.data),u(!1)})()}),[]),(0,j.jsxs)(n.u_,{onClose:t,size:"full",isOpen:a,children:[(0,j.jsx)(n.ZA,{}),(0,j.jsxs)(n.hz,{children:[(0,j.jsx)(n.xB,{children:"Select Lead"}),(0,j.jsx)(n.ol,{}),(0,j.jsx)(n.fe,{children:c?(0,j.jsx)(o.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,j.jsx)(p.Z,{})}):(0,j.jsx)(f.Z,{tableData:m,type:"multi",selectedValues:d,setSelectedValues:i,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,j.jsxs)(n.mz,{children:[(0,j.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{u(!0),s(l,b),t()}catch(e){console.log(e)}finally{u(!1)}},disabled:!!c,leftIcon:(0,j.jsx)(g.EAI,{}),children:[" ",c?(0,j.jsx)(p.Z,{}):"Select"]}),(0,j.jsx)(r.Button,{onClick:()=>t(),children:"Close"})]})]})]})};var b=a(2506),C=a(1545),y=a(9085),T=a(2630);const I=e=>{const{onClose:t,isOpen:a,fetchData:m,from:g}=e,[f,I]=(0,x.useState)([]),[w,z]=(0,x.useState)(!1),[N,H]=(0,x.useState)(!1),[B,A]=(0,x.useState)(!1),L=JSON.parse(localStorage.getItem("user")),P={agenda:"",attendes:[],attendesLead:[],location:"",related:g||"",dateTime:"",notes:"",createdBy:null===L||void 0===L?void 0:L._id},F=(0,b.TA)({initialValues:P,validationSchema:T.Ko,onSubmit:(e,t)=>{let{resetForm:a}=t;G()}}),{errors:_,touched:O,values:k,handleBlur:W,handleChange:Z,handleSubmit:D,setFieldValue:E}=F,G=async()=>{try{if(z(!0),k.attendes.length>0||k.attendesLead.length>0){200===(await(0,h.Fv)("api/meeting/add",k)).status&&(F.resetForm(),e.onClose(),m())}else y.Am.error("Select Related To")}catch(t){console.log(t)}finally{z(!1)}};(0,x.useEffect)((()=>{(async()=>{var e;let t;"contact"===k.related?t=await(0,h.ac)("admin"===L.role?"api/contact/":"api/contact/?createBy=".concat(L._id)):"lead"===k.related&&(t=await(0,h.ac)("admin"===L.role?"api/lead/":"api/lead/?createBy=".concat(L._id))),I(null===(e=t)||void 0===e?void 0:e.data)})()}),[e.id,k.related]);const V=null===f||void 0===f?void 0:f.map((e=>({...e,value:e._id,label:"contact"===k.related?"".concat(e.firstName," ").concat(e.lastName):e.leadName})));return(0,j.jsxs)(n.u_,{onClose:t,isOpen:a,children:[(0,j.jsx)(n.ZA,{}),(0,j.jsxs)(n.hz,{children:[(0,j.jsx)(n.xB,{children:"Add Meeting "}),(0,j.jsx)(n.ol,{}),(0,j.jsxs)(n.fe,{children:[(0,j.jsx)(v,{isOpen:N,onClose:H,fieldName:"attendes",setFieldValue:E}),(0,j.jsx)(S,{isOpen:B,onClose:A,fieldName:"attendesLead",setFieldValue:E}),(0,j.jsxs)(o.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Agenda",(0,j.jsx)(o.Text,{color:"red",children:"*"})]}),(0,j.jsx)(d.Input,{fontSize:"sm",onChange:Z,onBlur:W,value:k.agenda,name:"agenda",placeholder:"Agenda",fontWeight:"500",borderColor:_.agenda&&O.agenda?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",_.agenda&&O.agenda&&_.agenda]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"related To"}),(0,j.jsx)(i.Ee,{onChange:e=>E("related",e),value:k.related,children:(0,j.jsxs)(o.Stack,{direction:"row",children:[(0,j.jsx)(i.Y8,{value:"contact",children:"Contact"}),(0,j.jsx)(i.Y8,{value:"lead",children:"Lead"})]})}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",_.related&&O.related&&_.related]})]}),(null===f||void 0===f?void 0:f.length)>0&&k.related&&(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsxs)(o.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,j.jsx)(o.Text,{w:"100%",children:(0,j.jsx)(u.CUIAutoComplete,{label:"Choose Preferred Attendes ".concat("contact"===k.related?"Contact":"lead"===k.related&&"Lead"),placeholder:"Type a Name",name:"attendes",items:V,selectedItems:null===V||void 0===V?void 0:V.filter((e=>"contact"===k.related?null===k||void 0===k?void 0:k.attendes.includes(e._id):"lead"===k.related&&(null===k||void 0===k?void 0:k.attendesLead.includes(e._id)))),onSelectedItemsChange:e=>{const t=e.selectedItems.map((e=>e._id));"contact"===k.related?E("attendes",t):"lead"===k.related&&E("attendesLead",t)}})}),(0,j.jsx)(r.IconButton,{mb:6,onClick:()=>"contact"===k.related?H(!0):"lead"===k.related&&A(!0),fontSize:"25px",icon:(0,j.jsx)(C.zrj,{})})]}),(0,j.jsxs)(o.Text,{color:"red",children:[" ",_.attendes&&O.attendes&&_.attendes]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Location"}),(0,j.jsx)(d.Input,{fontSize:"sm",onChange:Z,onBlur:W,value:k.location,name:"location",placeholder:"Location",fontWeight:"500",borderColor:_.location&&O.location?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",_.location&&O.location&&_.location]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Date Time"}),(0,j.jsx)(d.Input,{fontSize:"sm",type:"datetime-local",onChange:Z,onBlur:W,value:k.dateTime,name:"dateTime",placeholder:"Date Time",fontWeight:"500",borderColor:_.dateTime&&O.dateTime?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",_.dateTime&&O.dateTime&&_.dateTime]})]}),(0,j.jsxs)(o.GridItem,{colSpan:{base:12},children:[(0,j.jsx)(s.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Notes"}),(0,j.jsx)(c.g,{resize:"none",fontSize:"sm",placeholder:"Notes",onChange:Z,onBlur:W,value:k.notes,name:"notes",fontWeight:"500",borderColor:_.notes&&O.notes?"red.300":null}),(0,j.jsxs)(o.Text,{mb:"10px",color:"red",children:[" ",_.notes&&O.notes&&_.notes]})]})]})]}),(0,j.jsxs)(n.mz,{children:[(0,j.jsx)(r.Button,{variant:"brand",leftIcon:(0,j.jsx)(l.AddIcon,{}),disabled:!!w,onClick:D,children:w?(0,j.jsx)(p.Z,{}):"Add"}),(0,j.jsx)(r.Button,{onClick:()=>{F.resetForm(),t()},children:"Close"})]})]})]})}},9181:(e,t,a)=>{a.d(t,{Z:()=>f});var l=a(8227),n=a(8735),o=a(2504),s=a(7005),d=a(2791),i=a(1358),r=a(3712),c=a(3252),u=a(7880),x=a(4220),m=a(2426),h=a.n(m),p=a(6355),g=a(978),j=a(1087),v=a(184);function f(e){const{columnsData:t,data:a,isLoding:m,setMeeting:f,className:S}=e,b=(0,l.ff)("secondaryGray.900","white"),C=(0,l.ff)("gray.200","whiteAlpha.100"),y=(0,d.useMemo)((()=>t),[t]),T=JSON.parse(localStorage.getItem("user")),[I,w]=(0,d.useState)(),z=(0,i.useTable)({columns:y,data:a,initialState:{pageIndex:0}},i.useGlobalFilter,i.useSortBy,i.usePagination),{getTableProps:N,getTableBodyProps:H,headerGroups:B,prepareRow:A,page:L,canPreviousPage:P,canNextPage:F,pageOptions:_,pageCount:O,gotoPage:k,nextPage:W,previousPage:Z,setPageSize:D,state:{pageIndex:E,pageSize:G}}=z;return _.length<I&&w(_.length),(0,v.jsxs)(r.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,v.jsxs)(n.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,v.jsxs)(n.Text,{color:b,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Meetings (",(0,v.jsx)(c.Z,{targetNumber:null===a||void 0===a?void 0:a.length}),")"]}),f&&(0,v.jsx)(o.Button,{onClick:()=>f(!0),leftIcon:(0,v.jsx)(g._Ti,{}),colorScheme:"gray",children:"Add Meeting "})]}),(0,v.jsx)(n.Box,{overflowY:"auto",className:S,children:(0,v.jsxs)(s.iA,{...N(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,v.jsx)(s.hr,{children:null===B||void 0===B?void 0:B.map(((e,t)=>{var a;return(0,d.createElement)(s.Tr,{...e.getHeaderGroupProps(),key:t},null===(a=e.headers)||void 0===a?void 0:a.map(((e,t)=>(0,d.createElement)(s.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:t,borderColor:C},(0,v.jsxs)(n.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,v.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,v.jsx)(p.sF,{}):(0,v.jsx)(p.h3_,{}):(0,v.jsx)(p.roE,{})})]})))))}))}),(0,v.jsx)(s.p3,{...H(),children:m?(0,v.jsx)(s.Tr,{children:(0,v.jsx)(s.Td,{colSpan:null===y||void 0===y?void 0:y.length,children:(0,v.jsx)(n.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:(0,v.jsx)(x.Z,{})})})}):0===(null===a||void 0===a?void 0:a.length)?(0,v.jsx)(s.Tr,{children:(0,v.jsx)(s.Td,{colSpan:y.length,children:(0,v.jsx)(n.Text,{textAlign:"center",width:"100%",color:b,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):(null===a||void 0===a?void 0:a.length)>0&&(null===L||void 0===L?void 0:L.map(((e,t)=>{var a;return A(e),(0,d.createElement)(s.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:t},null===e||void 0===e||null===(a=e.cells)||void 0===a?void 0:a.map(((e,t)=>{let a="";var l;if("#"===(null===e||void 0===e?void 0:e.column.Header))a=(0,v.jsx)(n.Flex,{align:"center",children:(0,v.jsx)(n.Text,{color:b,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.index)+1})});else if("agenda"===(null===e||void 0===e?void 0:e.column.Header)){var o,i;a=(0,v.jsx)(j.rU,{to:"admin"!==(null===T||void 0===T?void 0:T.role)?"/metting/".concat(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.values._id):"/admin/metting/".concat(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.values._id),children:(0,v.jsx)(n.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "})})}else"date Time"===(null===e||void 0===e?void 0:e.column.Header)?a=(0,v.jsx)(n.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:h()(null===e||void 0===e?void 0:e.value).format("D/MM/YYYY LT")}):"create By"===(null===e||void 0===e?void 0:e.column.Header)?a=(0,v.jsx)(n.Text,{me:"10px",color:b,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"times tamp"===(null===e||void 0===e?void 0:e.column.Header)&&(a=(0,v.jsx)(n.Text,{color:b,fontSize:"sm",fontWeight:"700",children:h()(null===e||void 0===e?void 0:e.value).format("(DD/MM) LT")}));return(0,d.createElement)(s.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:t,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},a)})))})))})]})}),(null===a||void 0===a?void 0:a.length)>5&&(0,v.jsx)(u.Z,{gotoPage:k,gopageValue:I,setGopageValue:w,pageCount:O,canPreviousPage:P,previousPage:Z,canNextPage:F,pageOptions:_,setPageSize:D,nextPage:W,pageSize:G,pageIndex:E})]})}},1504:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var l=a(5272),n=a(8735),o=a(2504),s=a(2791),d=a(1526),i=a(2964),r=a(9181),c=a(184);const u=()=>{const[e,t]=(0,s.useState)([]),a=JSON.parse(localStorage.getItem("user")),[u,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{x(!0);let e=await(0,d.ac)("admin"===a.role?"api/meeting":"api/meeting?createdBy=".concat(a._id));t(null===e||void 0===e?void 0:e.data),x(!1)})()}),[m]),(0,c.jsxs)("div",{children:[(0,c.jsx)(n.Grid,{templateColumns:"repeat(6, 1fr)",mb:3,gap:1,children:(0,c.jsx)(n.GridItem,{colStart:6,textAlign:"right",children:(0,c.jsx)(o.Button,{onClick:()=>h(!0),leftIcon:(0,c.jsx)(l.AddIcon,{}),variant:"brand",children:"Add"})})}),(0,c.jsx)(r.Z,{isOpen:m,isLoding:u,data:e,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"agenda",accessor:"agenda"},{Header:"date Time",accessor:"dateTime"},{Header:"times tamp",accessor:"timestamp"},{Header:"create By",accessor:"createdByName"}],className:"table-fix-container"}),(0,c.jsx)(i.Z,{isOpen:m,onClose:h})]})}}}]);
//# sourceMappingURL=5339.dbf756d0.chunk.js.map