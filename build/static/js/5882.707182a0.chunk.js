"use strict";(self.webpackChunkreal_estate=self.webpackChunkreal_estate||[]).push([[5882],{9029:(e,l,n)=>{n.d(l,{Z:()=>w});var o=n(5272),t=n(8735),i=n(8473),a=n(7231),d=n(2791),s=n(3728),r=n(3853),c=n(4373),u=n(6856),x=n(7689),v=n(7917),m=n(2504),h=n(1526),p=n(184);const g=e=>(0,p.jsx)("div",{children:(0,p.jsxs)(v.u_,{onClose:e.onClose,isOpen:e.isOpen,isCentered:!0,children:[(0,p.jsx)(v.ZA,{}),(0,p.jsxs)(v.hz,{children:[(0,p.jsxs)(v.xB,{children:["Delete Document","one"===e.method?"":"s"]}),(0,p.jsx)(v.ol,{}),(0,p.jsxs)(v.fe,{children:["Are You Sure To Delete selated Document","one"===e.method?"":"s"," ?"]}),(0,p.jsxs)(v.mz,{children:[(0,p.jsx)(m.Button,{colorScheme:"red",mr:2,onClick:async()=>{if("one"===e.method)e.deleteFile(e.id),e.onClose(!1);else if("many"===e.method)try{200===(await(0,h.$f)(e.url,e.data)).status&&(e.setSelectedValues([]),e.onClose(!1))}catch(l){console.log(l)}},children:"Yes"}),(0,p.jsx)(m.Button,{variant:"outline",onClick:()=>{e.onClose(!1)},children:"No"})]})]})]})});var j=n(5223),f=n(3393),b=n(3445),S=n(5798),C=n(2506),T=n(9085);const y=e=>{const{setLinkDocument:l}=e,[n,i]=(0,d.useState)(!1),{isOpen:a,onOpen:s,onClose:r}=(0,j.qY)(),[c,u]=(0,d.useState)([]),x=JSON.parse(localStorage.getItem("user")),g=(0,C.TA)({initialValues:{linkWith:"",linkContact:"",linkLead:""},onSubmit:(e,l)=>{let{resetForm:n}=l;B(),n()}}),{errors:y,touched:k,values:w,handleBlur:z,handleChange:I,handleSubmit:L,setFieldValue:D,resetForm:P}=g,B=async()=>{try{i(!0);let o=w.linkContact?{linkContact:w.linkContact}:{linkLead:w.linkLead},t=await(0,h.Fv)("api/document/link-document/".concat(e.id),o);var n;if(t&&200===t.status)l((e=>!e)),e.onClose();else T.Am.error(null===(n=t.response.data)||void 0===n?void 0:n.message)}catch(o){console.log(o)}finally{i(!1)}};return(0,d.useEffect)((()=>{(async()=>{if("contact"===w.linkWith){let e=await(0,h.ac)("admin"===x.role?"api/contact/":"api/contact/?createBy=".concat(x._id));w.createBy=null===e||void 0===e?void 0:e._id,u((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.firstName+" "+e.lastName,value:e._id}))))||[]]}))}else if("lead"===w.linkWith){let e=await(0,h.ac)("admin"===x.role?"api/lead/":"api/lead/?createBy=".concat(x._id));w.createBy=null===e||void 0===e?void 0:e._id,u((l=>{var n;return[...(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((e=>({label:e.leadName,value:e._id}))))||[]]}))}})()}),[w]),(0,p.jsxs)(v.u_,{onClose:e.onClose,isOpen:e.isOpen,children:[(0,p.jsx)(v.ZA,{}),(0,p.jsxs)(v.hz,{children:[(0,p.jsx)(v.xB,{children:"Link With Document"}),(0,p.jsx)(v.ol,{}),(0,p.jsx)(v.fe,{children:(0,p.jsxs)(t.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,p.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link With"}),(0,p.jsx)(b.Ee,{onChange:e=>{P(),D("linkWith",e)},value:w.linkWith,children:(0,p.jsxs)(t.Stack,{direction:"row",children:[(0,p.jsx)(b.Y8,{value:"contact",children:"Contact"}),(0,p.jsx)(b.Y8,{value:"lead",children:"Lead"})]})}),(0,p.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",y.linkWith&&k.linkWith&&y.linkWith]})]}),"contact"===w.linkWith?(0,p.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Contact"}),(0,p.jsx)(S.Input,{onFocus:s,fontSize:"sm",onChange:I,onBlur:()=>setTimeout(r,200),value:null===w||void 0===w?void 0:w.linkLabel,name:"linkLabel",placeholder:"Link Contact",fontWeight:"500",borderColor:null!==y&&void 0!==y&&y.linkLabel&&null!==k&&void 0!==k&&k.linkLabel?"red.300":null}),a&&(null===w||void 0===w?void 0:w.linkLabel)&&(0,p.jsx)(t.List,{position:"relative",border:"1px solid",bg:"gray.100",width:"100%",borderRadius:"0px 0px 20px 20px",lineHeight:1,children:null===c||void 0===c?void 0:c.filter((e=>{var l,n;return null===e||void 0===e||null===(l=e.label)||void 0===l||null===(n=l.toLowerCase())||void 0===n?void 0:n.includes(null===w||void 0===w?void 0:w.linkLabel.toLowerCase())})).map(((e,l)=>(0,p.jsx)(t.ListItem,{p:3,borderBottom:"2px solid #efefef",sx:{"&:last-child":{borderBottom:"none"}},cursor:"pointer",onClick:()=>{D("linkContact",null===e||void 0===e?void 0:e.value),D("linkLabel",null===e||void 0===e?void 0:e.label)},children:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.value)))}),(0,p.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",y.linkContact&&k.linkContact&&y.linkContact]})]}):"lead"===w.linkWith&&(0,p.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,p.jsx)(f.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Link Lead"}),(0,p.jsx)(S.Input,{onFocus:s,fontSize:"sm",onChange:I,onBlur:()=>setTimeout(r,200),value:null===w||void 0===w?void 0:w.linkLabel,name:"linkLabel",placeholder:"Link Lead",fontWeight:"500",borderColor:null!==y&&void 0!==y&&y.linkLabel&&null!==k&&void 0!==k&&k.linkLabel?"red.300":null}),a&&(null===w||void 0===w?void 0:w.linkLabel)&&(0,p.jsx)(t.List,{position:"relative",border:"1px solid",bg:"gray.100",width:"100%",borderRadius:"0px 0px 20px 20px",lineHeight:1,children:null===c||void 0===c?void 0:c.filter((e=>{var l,n;return null===e||void 0===e||null===(l=e.label)||void 0===l||null===(n=l.toLowerCase())||void 0===n?void 0:n.includes(null===w||void 0===w?void 0:w.linkLabel.toLowerCase())})).map(((e,l)=>(0,p.jsx)(t.ListItem,{p:3,borderBottom:"2px solid #efefef",sx:{"&:last-child":{borderBottom:"none"}},cursor:"pointer",onClick:()=>{D("linkLead",null===e||void 0===e?void 0:e.value),D("linkLabel",null===e||void 0===e?void 0:e.label)},children:null===e||void 0===e?void 0:e.label},null===e||void 0===e?void 0:e.value)))}),(0,p.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",y.linkLead&&k.linkLead&&y.linkLead]})]})]})}),(0,p.jsxs)(v.mz,{children:[(0,p.jsx)(m.Button,{colorScheme:"brand",rightIcon:(0,p.jsx)(o.LinkIcon,{}),mr:2,onClick:B,children:"Link"}),(0,p.jsx)(m.Button,{variant:"outline",colorScheme:"red",onClick:()=>{e.onClose(!1)},children:"Cancel"})]})]})]})};var k=n(458);const w=e=>{let{data:l,deleteFile:n,item:v,download:m,name:h,isFile:j,children:f,setLinkDocument:b,from:S}=e;const[C,T]=(0,d.useState)(!1),[w,z]=(0,d.useState)(!1),[I,L]=(0,d.useState)(!1),[D,P]=(0,d.useState)(!1),B=(0,x.s0)(),W=!j&&!!f,N=JSON.parse(localStorage.getItem("user"));return(0,p.jsxs)(t.List,{width:"100%",children:[(0,p.jsx)(t.ListItem,{alignItems:"center",display:"flex",children:(0,p.jsxs)(t.Text,{alignItems:"center",justifyContent:"space-between",display:"flex",width:"100%",onClick:W?()=>{T(!C)}:void 0,_hover:{cursor:"pointer",textDecoration:"none"},children:[(0,p.jsxs)(t.Flex,{width:"70%",alignItems:"center",children:[(0,p.jsx)(t.ListIcon,{as:j?r.tHe:s.FYx}),W&&(C?(0,p.jsx)(r.bTu,{}):(0,p.jsx)(r.Tfp,{})),h]}),null!==v&&void 0!==v&&v.createByName?(0,p.jsxs)(t.Text,{children:["(",null===v||void 0===v?void 0:v.createByName,") "]}):null,!W&&(0,p.jsx)(t.Flex,{justifyContent:"right",width:"100%",children:(0,p.jsxs)(i.v2,{isLazy:!0,children:[(0,p.jsx)(i.j2,{children:(0,p.jsx)(k.Nm0,{})}),(0,p.jsxs)(i.qy,{position:"absolute",right:-5,pl:"0.5em",minW:"fit-content",children:[!S&&null!==l&&void 0!==l&&l.linkContact?(0,p.jsx)(i.sN,{pr:2,w:"180px",onClick:()=>B("admin"!==(null===N||void 0===N?void 0:N.role)?"/contactView/".concat(null===l||void 0===l?void 0:l.linkContact):"/admin/contactView/".concat(null===l||void 0===l?void 0:l.linkContact)),icon:(0,p.jsx)(c.H27,{fontSize:15}),children:"Linked Contact"}):!S&&(null===l||void 0===l?void 0:l.linkLead)&&(0,p.jsx)(i.sN,{pr:2,w:"180px",onClick:()=>B("admin"!==(null===N||void 0===N?void 0:N.role)?"/leadView/".concat(null===l||void 0===l?void 0:l.linkLead):"/admin/leadView/".concat(null===l||void 0===l?void 0:l.linkLead)),icon:(0,p.jsx)(u.Cal,{fontSize:15}),children:"Linked Lead"}),!S&&(0,p.jsx)(i.sN,{pr:10,color:"blue",onClick:()=>(e=>{L(!0),P(e)})(null===l||void 0===l?void 0:l._id),icon:(0,p.jsx)(o.LinkIcon,{fontSize:15}),children:"Link"}),function(e){const l=e.substring(e.lastIndexOf(".")).toLowerCase();return[".jpg",".jpeg",".png",".gif",".bmp"].includes(l)}(null===l||void 0===l?void 0:l.img)&&(0,p.jsx)(i.sN,{pr:10,color:"green",onClick:()=>window.open(null===l||void 0===l?void 0:l.img),icon:(0,p.jsx)(o.ViewIcon,{fontSize:15}),children:"View"}),(0,p.jsx)(i.sN,{pr:10,onClick:()=>(e=>{m(e)})(null===l||void 0===l?void 0:l._id),icon:(0,p.jsx)(o.DownloadIcon,{fontSize:15}),children:"Download"}),!S&&(0,p.jsx)(i.sN,{pr:10,color:"red",onClick:()=>(e=>{z(!0),P(e)})(null===l||void 0===l?void 0:l._id),icon:(0,p.jsx)(o.DeleteIcon,{fontSize:15}),children:"Delete"})]})]})}),(0,p.jsx)(g,{isOpen:w,onClose:z,method:"one",deleteFile:n,id:D}),(0,p.jsx)(y,{isOpen:I,setLinkDocument:b,onClose:L,id:D})]})}),W&&(0,p.jsx)(a.UO,{in:C,animateOpacity:!0,children:(0,p.jsx)(t.List,{styleType:"disc",ml:4,children:f})})]})}},3610:(e,l,n)=>{n.d(l,{Z:()=>f});var o=n(8227),t=n(8735),i=n(2504),a=n(7005),d=n(2426),s=n.n(d),r=n(2791),c=n(1358),u=n(3712),x=n(3252),v=n(7880),m=n(9126),h=n(7689),p=n(1087),g=n(6311),j=n(184);function f(e){const{columnsData:l,tableData:n,title:d,fetchData:f}=e,b=(0,r.useMemo)((()=>l),[l]),S=(0,r.useMemo)((()=>n),[n]),[C,T]=(0,r.useState)(!1),y=JSON.parse(localStorage.getItem("user")),[k,w]=(0,r.useState)(),z=(0,c.useTable)({columns:b,data:S,initialState:{pageIndex:0}},c.useGlobalFilter,c.useSortBy,c.usePagination),{getTableProps:I,getTableBodyProps:L,headerGroups:D,prepareRow:P,page:B,canPreviousPage:W,canNextPage:N,pageOptions:F,pageCount:A,gotoPage:G,nextPage:H,previousPage:_,setPageSize:O,state:{pageIndex:Z,pageSize:E}}=z;F.length<k&&w(F.length);const V=(0,o.ff)("secondaryGray.900","white"),M=(0,o.ff)("gray.200","whiteAlpha.100"),R=(0,h.UO)();return(0,j.jsxs)(u.Z,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,j.jsxs)(t.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,j.jsxs)(t.Text,{color:V,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[d,"  (",(0,j.jsx)(x.Z,{targetNumber:null===S||void 0===S?void 0:S.length}),")"]}),(0,j.jsx)(i.Button,{onClick:()=>T(!0),rightIcon:(0,j.jsx)(m.nkP,{}),colorScheme:"gray",children:"Send Email"}),(0,j.jsx)(g.Z,{lead:e.lead,fetchData:f,isOpen:C,onClose:T,id:R.id})]}),(0,j.jsx)(t.Box,{overflowY:"auto",className:"table-container p0",children:(0,j.jsxs)(a.iA,{...I(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,j.jsx)(a.hr,{children:null===D||void 0===D?void 0:D.map(((e,l)=>(0,r.createElement)(a.Tr,{...e.getHeaderGroupProps(),key:l},e.headers.map(((e,l)=>(0,r.createElement)(a.Th,{...e.getHeaderProps(e.getSortByToggleProps()),pe:"10px",key:l,borderColor:M},(0,j.jsx)(t.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:e.render("Header")})))))))}),(0,j.jsx)(a.p3,{...L(),children:0===(null===S||void 0===S?void 0:S.length)?(0,j.jsx)(a.Tr,{children:(0,j.jsx)(a.Td,{colSpan:null===b||void 0===b?void 0:b.length,children:(0,j.jsx)(t.Text,{textAlign:"center",width:"100%",color:V,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):null===B||void 0===B?void 0:B.map(((e,l)=>(P(e),(0,r.createElement)(a.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e?void 0:e.cells.map(((e,l)=>{let n="";if("sender"===(null===e||void 0===e?void 0:e.column.Header))n=(0,j.jsx)(t.Flex,{align:"center",children:(0,j.jsx)(t.Text,{me:"10px",color:V,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})});else if("recipient"===(null===e||void 0===e?void 0:e.column.Header)){var o,i;n=(0,j.jsx)(t.Flex,{align:"center",children:(0,j.jsx)(p.rU,{to:"admin"!==(null===y||void 0===y?void 0:y.role)?"/Email/".concat(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.original._id):"/admin/Email/".concat(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.original._id),children:(0,j.jsx)(t.Text,{sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value})})})}else if("Created"===(null===e||void 0===e?void 0:e.column.Header)){var d;n=(0,j.jsx)(t.Text,{color:V,fontSize:"sm",fontWeight:"700",children:s()(null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.values.timestamp).format("h:mma (DD/MM)")})}else"time stamp"===(null===e||void 0===e?void 0:e.column.Header)&&(n=(0,j.jsx)(t.Text,{color:V,fontSize:"sm",fontWeight:"700",children:s()(null===e||void 0===e?void 0:e.value).fromNow()}));return(0,r.createElement)(a.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)}))))))})]})}),(null===S||void 0===S?void 0:S.length)>5&&(0,j.jsx)(v.Z,{gotoPage:G,gopageValue:k,setGopageValue:w,pageCount:A,canPreviousPage:W,previousPage:_,canNextPage:N,pageOptions:F,setPageSize:O,nextPage:H,pageSize:E,pageIndex:Z})]})}},8802:(e,l,n)=>{n.d(l,{Z:()=>b});var o=n(8227),t=n(8735),i=n(2504),a=n(7005),d=n(2426),s=n.n(d),r=n(2791),c=n(1358),u=n(3712),x=n(3252),v=n(7880),m=n(9126),h=n(6856),p=n(7689),g=n(1087),j=n(520),f=n(184);function b(e){const{columnsData:l,tableData:n,title:d,fetchData:b}=e,S=(0,r.useMemo)((()=>l),[l]),C=(0,r.useMemo)((()=>n),[n]),[T,y]=(0,r.useState)(!1),k=JSON.parse(localStorage.getItem("user")),[w,z]=(0,r.useState)(),I=(0,c.useTable)({columns:S,data:C,initialState:{pageIndex:0}},c.useGlobalFilter,c.useSortBy,c.usePagination),{getTableProps:L,getTableBodyProps:D,headerGroups:P,prepareRow:B,page:W,canPreviousPage:N,canNextPage:F,pageOptions:A,pageCount:G,gotoPage:H,nextPage:_,previousPage:O,setPageSize:Z,state:{pageIndex:E,pageSize:V}}=I;A.length<w&&z(A.length);const M=(0,o.ff)("secondaryGray.900","white"),R=(0,o.ff)("gray.200","whiteAlpha.100"),Y=(0,p.UO)(),J=(0,p.s0)();return(0,f.jsxs)(u.Z,{direction:"column",w:"100%",px:"0px",style:{border:"1px solid gray.200"},overflowX:{sm:"scroll",lg:"hidden"},children:[(0,f.jsxs)(t.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,f.jsxs)(t.Text,{color:M,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:[d," (",(0,f.jsx)(x.Z,{targetNumber:null===C||void 0===C?void 0:C.length}),")"]}),e.text?(0,f.jsx)(i.Button,{onClick:()=>J("/communication-integration"),leftIcon:(0,f.jsx)(h.Kw4,{}),colorScheme:"gray",children:"send text Msg"}):(0,f.jsx)(i.Button,{onClick:()=>y(!0),leftIcon:(0,f.jsx)(m.lfG,{}),colorScheme:"gray",children:"Call"}),(0,f.jsx)(j.Z,{lead:e.lead,fetchData:b,isOpen:T,onClose:y,id:Y.id})]}),(0,f.jsx)(t.Box,{overflowY:"auto",className:"table-container",children:(0,f.jsxs)(a.iA,{...L(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,f.jsx)(a.hr,{children:null===P||void 0===P?void 0:P.map(((e,l)=>(0,r.createElement)(a.Tr,{...e.getHeaderGroupProps(),key:l},e.headers.map(((e,l)=>(0,r.createElement)(a.Th,{...e.getHeaderProps(e.getSortByToggleProps()),pe:"10px",key:l,borderColor:R},(0,f.jsx)(t.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:e.render("Header")})))))))}),(0,f.jsxs)(a.p3,{...D(),children:[0===(null===C||void 0===C?void 0:C.length)&&(0,f.jsx)(a.Tr,{children:(0,f.jsx)(a.Td,{colSpan:S.length,children:(0,f.jsx)(t.Text,{textAlign:"center",width:"100%",color:M,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}),null===W||void 0===W?void 0:W.map(((l,n)=>(B(l),(0,r.createElement)(a.Tr,{...null===l||void 0===l?void 0:l.getRowProps(),key:n},null===l||void 0===l?void 0:l.cells.map(((l,n)=>{let o="";if("sender"===(null===l||void 0===l?void 0:l.column.Header))o=(0,f.jsx)(t.Flex,{align:"center",children:(0,f.jsx)(t.Text,{fontSize:"sm",color:M,fontWeight:"700",children:null===l||void 0===l?void 0:l.value})});else if("recipient"===(null===l||void 0===l?void 0:l.column.Header)){var i,d,c,u;o=(0,f.jsx)(t.Flex,{align:"center",children:(0,f.jsx)(g.rU,{to:"admin"!==(null===k||void 0===k?void 0:k.role)?e.text?"/text-msg/".concat(null===l||void 0===l||null===(i=l.row)||void 0===i?void 0:i.original._id):"/phone-call/".concat(null===l||void 0===l||null===(d=l.row)||void 0===d?void 0:d.original._id):e.text?"/admin/text-msg/".concat(null===l||void 0===l||null===(c=l.row)||void 0===c?void 0:c.original._id):"/admin/phone-call/".concat(null===l||void 0===l||null===(u=l.row)||void 0===u?void 0:u.original._id),children:(0,f.jsx)(t.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===l||void 0===l?void 0:l.value})})})}else if("Created"===(null===l||void 0===l?void 0:l.column.Header)){var x;o=(0,f.jsx)(t.Text,{color:M,fontSize:"sm",fontWeight:"700",children:s()(null===l||void 0===l||null===(x=l.row)||void 0===x?void 0:x.values.timestamp).format("h:mma (DD/MM)")})}else"time stamp"===(null===l||void 0===l?void 0:l.column.Header)&&(o=(0,f.jsx)(t.Text,{color:M,fontSize:"sm",fontWeight:"700",children:s()(null===l||void 0===l?void 0:l.value).fromNow()}));return(0,r.createElement)(a.Td,{...null===l||void 0===l?void 0:l.getCellProps(),key:n,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},o)}))))))]})]})}),(null===C||void 0===C?void 0:C.length)>5&&(0,f.jsx)(v.Z,{gotoPage:H,gopageValue:w,setGopageValue:z,pageCount:G,canPreviousPage:N,previousPage:O,canNextPage:F,pageOptions:A,setPageSize:Z,nextPage:_,pageSize:V,pageIndex:E})]})}},6311:(e,l,n)=>{n.d(l,{Z:()=>p});var o=n(7917),t=n(8735),i=n(3393),a=n(5798),d=n(6123),s=n(2504),r=n(4220),c=n(2506),u=n(2791),x=n(9126),v=n(2630),m=n(1526),h=n(184);const p=e=>{const{onClose:l,isOpen:n,fetchData:p}=e,g=JSON.parse(localStorage.getItem("user")),[j,f]=(0,u.useState)(!1),[b,S]=(0,u.useState)(!1),[C,T]=(0,u.useState)(!1),y={sender:null===g||void 0===g?void 0:g._id,recipient:"",subject:"",message:"",createBy:"",createByLead:"",startDate:"",endDate:""},k=(0,c.TA)({initialValues:y,validationSchema:v.Io,onSubmit:(e,l)=>{let{resetForm:n}=l;W(),n()}}),{errors:w,touched:z,values:I,handleBlur:L,handleChange:D,handleSubmit:P,setFieldValue:B}=k,W=async()=>{try{f(!0),200===(await(0,m.Fv)("api/email/add",I)).status&&(e.onClose(),p())}catch(l){console.log(l)}finally{f(!1)}};return(0,u.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let i=await(0,m.ac)("api/contact/view/",e.id);var l,n,o,t;200===(null===i||void 0===i?void 0:i.status)&&(B("recipient",null===i||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.email),B("createBy",e.id),I.recipient=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.contact)||void 0===t?void 0:t.email)}else if(e.id&&"true"===e.lead){let l=await(0,m.ac)("api/lead/view/",e.id);var i,a,d,s;200===(null===l||void 0===l?void 0:l.status)&&(B("recipient",null===l||void 0===l||null===(i=l.data)||void 0===i||null===(a=i.lead)||void 0===a?void 0:a.leadEmail),B("createByLead",e.id),I.recipient=null===l||void 0===l||null===(d=l.data)||void 0===d||null===(s=d.lead)||void 0===s?void 0:s.leadEmail)}})()}),[e.id]),(0,h.jsxs)(o.u_,{onClose:l,isOpen:n,isCentered:!0,children:[(0,h.jsx)(o.ZA,{}),(0,h.jsxs)(o.hz,{children:[(0,h.jsx)(o.xB,{children:"Send Email "}),(0,h.jsx)(o.ol,{}),(0,h.jsx)(o.fe,{children:(0,h.jsxs)(t.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,h.jsx)(t.Text,{color:"red",children:"*"})]}),(0,h.jsx)(a.Input,{fontSize:"sm",onChange:D,onBlur:L,value:I.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:w.recipient&&z.recipient?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",w.recipient&&z.recipient&&w.recipient]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Subject"}),(0,h.jsx)(a.Input,{fontSize:"sm",placeholder:"Enter subject",onChange:D,onBlur:L,value:I.subject,name:"subject",fontWeight:"500",borderColor:w.subject&&z.subject?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",w.subject&&z.subject&&w.subject]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12,md:6},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,h.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:D,onBlur:L,value:I.startDate,name:"startDate",fontWeight:"500",borderColor:null!==w&&void 0!==w&&w.startDate&&null!==z&&void 0!==z&&z.startDate?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",w.startDate&&z.startDate&&w.startDate]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12,md:6},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,h.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:D,onBlur:L,value:I.endDate,name:"endDate",fontWeight:"500",borderColor:null!==w&&void 0!==w&&w.endDate&&null!==z&&void 0!==z&&z.endDate?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",w.endDate&&z.endDate&&w.endDate]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Message"}),(0,h.jsx)(d.g,{fontSize:"sm",placeholder:"Here Type message",resize:"none",onChange:D,onBlur:L,value:I.message,name:"message",fontWeight:"500",borderColor:w.message&&z.message?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",w.message&&z.message&&w.message]})]})]})}),(0,h.jsxs)(o.mz,{children:[(0,h.jsx)(s.Button,{variant:"brand",onClick:P,rightIcon:(0,h.jsx)(x.nkP,{}),disabled:!!j,children:j?(0,h.jsx)(r.Z,{}):"Send"}),(0,h.jsx)(s.Button,{onClick:()=>{k.resetForm(),l()},children:"Close"})]})]})]})}},2964:(e,l,n)=>{n.d(l,{Z:()=>k});var o=n(5272),t=n(7917),i=n(8735),a=n(3393),d=n(5798),s=n(3445),r=n(2504),c=n(6123),u=n(7555),x=n(2791),v=n(4128),m=n(1526),h=n(4220),p=n(8014),g=n(184);const j=e=>{const{onClose:l,isOpen:n,fieldName:o,setFieldValue:a}=e,[d,s]=(0,x.useState)([]),[c,u]=(0,x.useState)(!1),[j,f]=(0,x.useState)([]),b=JSON.parse(localStorage.getItem("user")),S=[...new Set(d)];return(0,x.useEffect)((()=>{(async()=>{u(!0);let e=await(0,m.ac)("admin"===b.role?"api/contact/":"api/contact/?createBy=".concat(b._id));e&&200==e.status&&f(null===e||void 0===e?void 0:e.data),u(!1)})()}),[]),(0,g.jsxs)(t.u_,{onClose:l,size:"full",isOpen:n,children:[(0,g.jsx)(t.ZA,{}),(0,g.jsxs)(t.hz,{children:[(0,g.jsx)(t.xB,{children:"Select Contact"}),(0,g.jsx)(t.ol,{}),(0,g.jsx)(t.fe,{children:c?(0,g.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,g.jsx)(h.Z,{})}):(0,g.jsx)(v.Z,{tableData:j,type:"multi",selectedValues:d,setSelectedValues:s,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"title",accessor:"title"},{Header:"first Name",accessor:"firstName"},{Header:"last Name",accessor:"lastName"},{Header:"phone Number",accessor:"phoneNumber"},{Header:"Email Address",accessor:"email"},{Header:"physical Address",accessor:"physicalAddress"},{Header:"mailing Address",accessor:"mailingAddress"},{Header:"Contact Method",accessor:"preferredContactMethod"}],title:"Contact"})}),(0,g.jsxs)(t.mz,{children:[(0,g.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{u(!0),a(o,S),l()}catch(e){console.log(e)}finally{u(!1)}},disabled:!!c,leftIcon:(0,g.jsx)(p.EAI,{}),children:[" ",c?(0,g.jsx)(h.Z,{}):"Select"]}),(0,g.jsx)(r.Button,{onClick:()=>l(),children:"Close"})]})]})]})};var f=n(8470);const b=e=>{const{onClose:l,isOpen:n,fieldName:o,setFieldValue:a}=e,[d,s]=(0,x.useState)([]),[c,u]=(0,x.useState)(!1),[v,j]=(0,x.useState)([]),b=JSON.parse(localStorage.getItem("user")),S=[...new Set(d)];return(0,x.useEffect)((()=>{(async()=>{u(!0);let e=await(0,m.ac)("admin"===b.role?"api/lead/":"api/lead/?createBy=".concat(b._id));e&&200==e.status&&j(null===e||void 0===e?void 0:e.data),u(!1)})()}),[]),(0,g.jsxs)(t.u_,{onClose:l,size:"full",isOpen:n,children:[(0,g.jsx)(t.ZA,{}),(0,g.jsxs)(t.hz,{children:[(0,g.jsx)(t.xB,{children:"Select Lead"}),(0,g.jsx)(t.ol,{}),(0,g.jsx)(t.fe,{children:c?(0,g.jsx)(i.Flex,{justifyContent:"center",alignItems:"center",width:"100%",children:(0,g.jsx)(h.Z,{})}):(0,g.jsx)(f.Z,{tableData:v,type:"multi",selectedValues:d,setSelectedValues:s,columnsData:[{Header:"#",accessor:"_id",isSortable:!1,width:10},{Header:"Lead Name",accessor:"leadName",width:20},{Header:"Lead Email",accessor:"leadEmail"},{Header:"Lead PhoneNumber",accessor:"leadPhoneNumber"},{Header:"Lead Address",accessor:"leadAddress"},{Header:"Lead Status",accessor:"leadStatus"},{Header:"Lead Owner",accessor:"leadOwner"},{Header:"Lead Score",accessor:"leadScore"}],title:"Lead"})}),(0,g.jsxs)(t.mz,{children:[(0,g.jsxs)(r.Button,{variant:"brand",onClick:async()=>{try{u(!0),a(o,S),l()}catch(e){console.log(e)}finally{u(!1)}},disabled:!!c,leftIcon:(0,g.jsx)(p.EAI,{}),children:[" ",c?(0,g.jsx)(h.Z,{}):"Select"]}),(0,g.jsx)(r.Button,{onClick:()=>l(),children:"Close"})]})]})]})};var S=n(2506),C=n(1545),T=n(9085),y=n(2630);const k=e=>{const{onClose:l,isOpen:n,fetchData:v,from:p}=e,[f,k]=(0,x.useState)([]),[w,z]=(0,x.useState)(!1),[I,L]=(0,x.useState)(!1),[D,P]=(0,x.useState)(!1),B=JSON.parse(localStorage.getItem("user")),W={agenda:"",attendes:[],attendesLead:[],location:"",related:p||"",dateTime:"",notes:"",createdBy:null===B||void 0===B?void 0:B._id},N=(0,S.TA)({initialValues:W,validationSchema:y.Ko,onSubmit:(e,l)=>{let{resetForm:n}=l;E()}}),{errors:F,touched:A,values:G,handleBlur:H,handleChange:_,handleSubmit:O,setFieldValue:Z}=N,E=async()=>{try{if(z(!0),G.attendes.length>0||G.attendesLead.length>0){200===(await(0,m.Fv)("api/meeting/add",G)).status&&(N.resetForm(),e.onClose(),v())}else T.Am.error("Select Related To")}catch(l){console.log(l)}finally{z(!1)}};(0,x.useEffect)((()=>{(async()=>{var e;let l;"contact"===G.related?l=await(0,m.ac)("admin"===B.role?"api/contact/":"api/contact/?createBy=".concat(B._id)):"lead"===G.related&&(l=await(0,m.ac)("admin"===B.role?"api/lead/":"api/lead/?createBy=".concat(B._id))),k(null===(e=l)||void 0===e?void 0:e.data)})()}),[e.id,G.related]);const V=null===f||void 0===f?void 0:f.map((e=>({...e,value:e._id,label:"contact"===G.related?"".concat(e.firstName," ").concat(e.lastName):e.leadName})));return(0,g.jsxs)(t.u_,{onClose:l,isOpen:n,children:[(0,g.jsx)(t.ZA,{}),(0,g.jsxs)(t.hz,{children:[(0,g.jsx)(t.xB,{children:"Add Meeting "}),(0,g.jsx)(t.ol,{}),(0,g.jsxs)(t.fe,{children:[(0,g.jsx)(j,{isOpen:I,onClose:L,fieldName:"attendes",setFieldValue:Z}),(0,g.jsx)(b,{isOpen:D,onClose:P,fieldName:"attendesLead",setFieldValue:Z}),(0,g.jsxs)(i.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsxs)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Agenda",(0,g.jsx)(i.Text,{color:"red",children:"*"})]}),(0,g.jsx)(d.Input,{fontSize:"sm",onChange:_,onBlur:H,value:G.agenda,name:"agenda",placeholder:"Agenda",fontWeight:"500",borderColor:F.agenda&&A.agenda?"red.300":null}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",F.agenda&&A.agenda&&F.agenda]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"related To"}),(0,g.jsx)(s.Ee,{onChange:e=>Z("related",e),value:G.related,children:(0,g.jsxs)(i.Stack,{direction:"row",children:[(0,g.jsx)(s.Y8,{value:"contact",children:"Contact"}),(0,g.jsx)(s.Y8,{value:"lead",children:"Lead"})]})}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",F.related&&A.related&&F.related]})]}),(null===f||void 0===f?void 0:f.length)>0&&G.related&&(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsxs)(i.Flex,{alignItems:"end",justifyContent:"space-between",children:[(0,g.jsx)(i.Text,{w:"100%",children:(0,g.jsx)(u.CUIAutoComplete,{label:"Choose Preferred Attendes ".concat("contact"===G.related?"Contact":"lead"===G.related&&"Lead"),placeholder:"Type a Name",name:"attendes",items:V,selectedItems:null===V||void 0===V?void 0:V.filter((e=>"contact"===G.related?null===G||void 0===G?void 0:G.attendes.includes(e._id):"lead"===G.related&&(null===G||void 0===G?void 0:G.attendesLead.includes(e._id)))),onSelectedItemsChange:e=>{const l=e.selectedItems.map((e=>e._id));"contact"===G.related?Z("attendes",l):"lead"===G.related&&Z("attendesLead",l)}})}),(0,g.jsx)(r.IconButton,{mb:6,onClick:()=>"contact"===G.related?L(!0):"lead"===G.related&&P(!0),fontSize:"25px",icon:(0,g.jsx)(C.zrj,{})})]}),(0,g.jsxs)(i.Text,{color:"red",children:[" ",F.attendes&&A.attendes&&F.attendes]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Location"}),(0,g.jsx)(d.Input,{fontSize:"sm",onChange:_,onBlur:H,value:G.location,name:"location",placeholder:"Location",fontWeight:"500",borderColor:F.location&&A.location?"red.300":null}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",F.location&&A.location&&F.location]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Date Time"}),(0,g.jsx)(d.Input,{fontSize:"sm",type:"datetime-local",onChange:_,onBlur:H,value:G.dateTime,name:"dateTime",placeholder:"Date Time",fontWeight:"500",borderColor:F.dateTime&&A.dateTime?"red.300":null}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",F.dateTime&&A.dateTime&&F.dateTime]})]}),(0,g.jsxs)(i.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Notes"}),(0,g.jsx)(c.g,{resize:"none",fontSize:"sm",placeholder:"Notes",onChange:_,onBlur:H,value:G.notes,name:"notes",fontWeight:"500",borderColor:F.notes&&A.notes?"red.300":null}),(0,g.jsxs)(i.Text,{mb:"10px",color:"red",children:[" ",F.notes&&A.notes&&F.notes]})]})]})]}),(0,g.jsxs)(t.mz,{children:[(0,g.jsx)(r.Button,{variant:"brand",leftIcon:(0,g.jsx)(o.AddIcon,{}),disabled:!!w,onClick:O,children:w?(0,g.jsx)(h.Z,{}):"Add"}),(0,g.jsx)(r.Button,{onClick:()=>{N.resetForm(),l()},children:"Close"})]})]})]})}},9181:(e,l,n)=>{n.d(l,{Z:()=>f});var o=n(8227),t=n(8735),i=n(2504),a=n(7005),d=n(2791),s=n(1358),r=n(3712),c=n(3252),u=n(7880),x=n(4220),v=n(2426),m=n.n(v),h=n(6355),p=n(978),g=n(1087),j=n(184);function f(e){const{columnsData:l,data:n,isLoding:v,setMeeting:f,className:b}=e,S=(0,o.ff)("secondaryGray.900","white"),C=(0,o.ff)("gray.200","whiteAlpha.100"),T=(0,d.useMemo)((()=>l),[l]),y=JSON.parse(localStorage.getItem("user")),[k,w]=(0,d.useState)(),z=(0,s.useTable)({columns:T,data:n,initialState:{pageIndex:0}},s.useGlobalFilter,s.useSortBy,s.usePagination),{getTableProps:I,getTableBodyProps:L,headerGroups:D,prepareRow:P,page:B,canPreviousPage:W,canNextPage:N,pageOptions:F,pageCount:A,gotoPage:G,nextPage:H,previousPage:_,setPageSize:O,state:{pageIndex:Z,pageSize:E}}=z;return F.length<k&&w(F.length),(0,j.jsxs)(r.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,j.jsxs)(t.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,j.jsxs)(t.Text,{color:S,fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Meetings (",(0,j.jsx)(c.Z,{targetNumber:null===n||void 0===n?void 0:n.length}),")"]}),f&&(0,j.jsx)(i.Button,{onClick:()=>f(!0),leftIcon:(0,j.jsx)(p._Ti,{}),colorScheme:"gray",children:"Add Meeting "})]}),(0,j.jsx)(t.Box,{overflowY:"auto",className:b,children:(0,j.jsxs)(a.iA,{...I(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,j.jsx)(a.hr,{children:null===D||void 0===D?void 0:D.map(((e,l)=>{var n;return(0,d.createElement)(a.Tr,{...e.getHeaderGroupProps(),key:l},null===(n=e.headers)||void 0===n?void 0:n.map(((e,l)=>(0,d.createElement)(a.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:C},(0,j.jsxs)(t.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,j.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,j.jsx)(h.sF,{}):(0,j.jsx)(h.h3_,{}):(0,j.jsx)(h.roE,{})})]})))))}))}),(0,j.jsx)(a.p3,{...L(),children:v?(0,j.jsx)(a.Tr,{children:(0,j.jsx)(a.Td,{colSpan:null===T||void 0===T?void 0:T.length,children:(0,j.jsx)(t.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,j.jsx)(x.Z,{})})})}):0===(null===n||void 0===n?void 0:n.length)?(0,j.jsx)(a.Tr,{children:(0,j.jsx)(a.Td,{colSpan:T.length,children:(0,j.jsx)(t.Text,{textAlign:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):(null===n||void 0===n?void 0:n.length)>0&&(null===B||void 0===B?void 0:B.map(((e,l)=>{var n;return P(e),(0,d.createElement)(a.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(n=e.cells)||void 0===n?void 0:n.map(((e,l)=>{let n="";var o;if("#"===(null===e||void 0===e?void 0:e.column.Header))n=(0,j.jsx)(t.Flex,{align:"center",children:(0,j.jsx)(t.Text,{color:S,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})});else if("agenda"===(null===e||void 0===e?void 0:e.column.Header)){var i,s;n=(0,j.jsx)(g.rU,{to:"admin"!==(null===y||void 0===y?void 0:y.role)?"/metting/".concat(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.values._id):"/admin/metting/".concat(null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.values._id),children:(0,j.jsx)(t.Text,{me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},color:"green.400",fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "})})}else"date Time"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,j.jsx)(t.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:m()(null===e||void 0===e?void 0:e.value).format("D/MM/YYYY LT")}):"create By"===(null===e||void 0===e?void 0:e.column.Header)?n=(0,j.jsx)(t.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "}):"times tamp"===(null===e||void 0===e?void 0:e.column.Header)&&(n=(0,j.jsx)(t.Text,{color:S,fontSize:"sm",fontWeight:"700",children:m()(null===e||void 0===e?void 0:e.value).format("(DD/MM) LT")}));return(0,d.createElement)(a.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)})))})))})]})}),(null===n||void 0===n?void 0:n.length)>5&&(0,j.jsx)(u.Z,{gotoPage:G,gopageValue:k,setGopageValue:w,pageCount:A,canPreviousPage:W,previousPage:_,canNextPage:N,pageOptions:F,setPageSize:O,nextPage:H,pageSize:E,pageIndex:Z})]})}},520:(e,l,n)=>{n.d(l,{Z:()=>p});var o=n(7917),t=n(8735),i=n(3393),a=n(5798),d=n(6123),s=n(2504),r=n(4220),c=n(2506),u=n(2791),x=n(9126),v=n(2630),m=n(1526),h=n(184);const p=e=>{const{onClose:l,isOpen:n,fetchData:p}=e,[g,j]=(0,u.useState)(!1),f=JSON.parse(localStorage.getItem("user")),b={sender:null===f||void 0===f?void 0:f._id,recipient:"",callDuration:"",callNotes:"",createBy:"",createByLead:"",startDate:"",endDate:""},S=(0,c.TA)({initialValues:b,validationSchema:v.Fv,onSubmit:(e,l)=>{let{resetForm:n}=l;L(),n()}}),{errors:C,touched:T,values:y,handleBlur:k,handleChange:w,handleSubmit:z,setFieldValue:I}=S,L=async()=>{try{j(!0),200===(await(0,m.Fv)("api/phoneCall/add",y)).status&&(e.onClose(),p())}catch(l){console.log(l)}finally{j(!1)}};return(0,u.useEffect)((()=>{(async()=>{if(e.id&&"true"!==e.lead){let i=await(0,m.ac)("api/contact/view/",e.id);var l,n,o,t;200===(null===i||void 0===i?void 0:i.status)&&(I("recipient",null===i||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.contact)||void 0===n?void 0:n.phoneNumber),I("createBy",null===e||void 0===e?void 0:e.id),y.recipient=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.contact)||void 0===t?void 0:t.phoneNumber)}else if(e.id&&"true"===e.lead){let l=await(0,m.ac)("api/lead/view/",e.id);var i,a,d,s;200===(null===l||void 0===l?void 0:l.status)&&(I("recipient",null===l||void 0===l||null===(i=l.data)||void 0===i||null===(a=i.lead)||void 0===a?void 0:a.leadPhoneNumber),I("createByLead",e.id),y.recipient=null===l||void 0===l||null===(d=l.data)||void 0===d||null===(s=d.lead)||void 0===s?void 0:s.leadPhoneNumber)}})()}),[e.id]),(0,h.jsxs)(o.u_,{onClose:l,isOpen:n,isCentered:!0,children:[(0,h.jsx)(o.ZA,{}),(0,h.jsxs)(o.hz,{children:[(0,h.jsx)(o.xB,{children:"Add Call "}),(0,h.jsx)(o.ol,{}),(0,h.jsx)(o.fe,{children:(0,h.jsxs)(t.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Recipient",(0,h.jsx)(t.Text,{color:"red",children:"*"})]}),(0,h.jsx)(a.Input,{fontSize:"sm",type:"number",onChange:w,onBlur:k,value:y.recipient,name:"recipient",placeholder:"Recipient",fontWeight:"500",borderColor:C.recipient&&T.recipient?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",C.recipient&&T.recipient&&C.recipient]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12,md:6},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Start Date"}),(0,h.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:w,onBlur:k,value:y.startDate,name:"startDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.startDate&&null!==T&&void 0!==T&&T.startDate?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",C.startDate&&T.startDate&&C.startDate]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12,md:6},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"End Date"}),(0,h.jsx)(a.Input,{type:"datetime-local",fontSize:"sm",onChange:w,onBlur:k,value:y.endDate,name:"endDate",fontWeight:"500",borderColor:null!==C&&void 0!==C&&C.endDate&&null!==T&&void 0!==T&&T.endDate?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",C.endDate&&T.endDate&&C.endDate]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsxs)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:["Call Duration",(0,h.jsx)(t.Text,{color:"red",children:"*"})]}),(0,h.jsx)(a.Input,{fontSize:"sm",onChange:w,onBlur:k,value:y.callDuration,name:"callDuration",placeholder:"call Duration",fontWeight:"500",borderColor:C.callDuration&&T.callDuration?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",C.callDuration&&T.callDuration&&C.callDuration]})]}),(0,h.jsxs)(t.GridItem,{colSpan:{base:12},children:[(0,h.jsx)(i.FormLabel,{display:"flex",ms:"4px",fontSize:"sm",fontWeight:"500",mb:"8px",children:"Call Notes"}),(0,h.jsx)(d.g,{resize:"none",fontSize:"sm",placeholder:"Enter Call Notes",onChange:w,onBlur:k,value:y.callNotes,name:"callNotes",fontWeight:"500",borderColor:C.callNotes&&T.callNotes?"red.300":null}),(0,h.jsxs)(t.Text,{mb:"10px",color:"red",children:[" ",C.callNotes&&T.callNotes&&C.callNotes]})]})]})}),(0,h.jsxs)(o.mz,{children:[(0,h.jsx)(s.Button,{variant:"brand",leftIcon:(0,h.jsx)(x.lfG,{}),disabled:!!g,onClick:z,children:g?(0,h.jsx)(r.Z,{}):"Call"}),(0,h.jsx)(s.Button,{onClick:()=>{S.resetForm(),l()},children:"Close"})]})]})]})}},8460:(e,l,n)=>{n.d(l,{Z:()=>g});var o=n(8227),t=n(8735),i=n(2504),a=n(7005),d=n(2791),s=n(1358),r=n(5272),c=n(3712),u=n(3252),x=n(7880),v=n(4220),m=n(6355),h=n(4399),p=n(184);function g(e){const{columnsData:l,fetchData:n,data:g,isLoding:j,setTaskModel:f,className:b}=e,S=(0,o.ff)("secondaryGray.900","white"),C=(0,o.ff)("gray.200","whiteAlpha.100"),T=(0,d.useMemo)((()=>l),[l]),[y,k]=(0,d.useState)(!1),[w,z]=(0,d.useState)(),[I,L]=(0,d.useState)(),D=(0,s.useTable)({columns:T,data:g,initialState:{pageIndex:0}},s.useGlobalFilter,s.useSortBy,s.usePagination),{getTableProps:P,getTableBodyProps:B,headerGroups:W,prepareRow:N,page:F,canPreviousPage:A,canNextPage:G,pageOptions:H,pageCount:_,gotoPage:O,nextPage:Z,previousPage:E,setPageSize:V,state:{pageIndex:M,pageSize:R}}=D;H.length<I&&L(H.length);return(0,p.jsxs)(c.Z,{direction:"column",w:"100%",px:"0px",overflowX:{sm:"scroll",lg:"hidden"},children:[(0,p.jsx)(h.Z,{fetchData:n,isOpen:y,onClose:k,info:w}),(0,p.jsxs)(t.Flex,{px:"25px",justify:"space-between",mb:"20px",align:"center",children:[(0,p.jsxs)(t.Text,{color:"secondaryGray.900",fontSize:"22px",fontWeight:"700",lineHeight:"100%",children:["Tasks (",(0,p.jsx)(u.Z,{targetNumber:null===g||void 0===g?void 0:g.length}),")"]}),f&&(0,p.jsx)(i.Button,{onClick:()=>f(!0),leftIcon:(0,p.jsx)(r.AddIcon,{}),colorScheme:"gray",children:"Create Task"})]}),(0,p.jsx)(t.Box,{overflowY:"auto",className:b,children:(0,p.jsxs)(a.iA,{...P(),variant:"simple",color:"gray.500",mb:"24px",children:[(0,p.jsx)(a.hr,{children:null===W||void 0===W?void 0:W.map(((e,l)=>{var n;return(0,d.createElement)(a.Tr,{...e.getHeaderGroupProps(),key:l},null===(n=e.headers)||void 0===n?void 0:n.map(((e,l)=>(0,d.createElement)(a.Th,{...e.getHeaderProps(!1!==e.isSortable&&e.getSortByToggleProps()),pe:"10px",key:l,borderColor:C},(0,p.jsxs)(t.Flex,{justify:"space-between",align:"center",fontSize:{sm:"10px",lg:"12px"},color:"gray.400",children:[e.render("Header"),!1!==e.isSortable&&(0,p.jsx)("span",{children:e.isSorted?e.isSortedDesc?(0,p.jsx)(m.sF,{}):(0,p.jsx)(m.h3_,{}):(0,p.jsx)(m.roE,{})})]})))))}))}),(0,p.jsx)(a.p3,{...B(),children:j?(0,p.jsx)(a.Tr,{children:(0,p.jsx)(a.Td,{colSpan:null===T||void 0===T?void 0:T.length,children:(0,p.jsx)(t.Flex,{justifyContent:"center",alignItems:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:(0,p.jsx)(v.Z,{})})})}):0===(null===g||void 0===g?void 0:g.length)?(0,p.jsx)(a.Tr,{children:(0,p.jsx)(a.Td,{colSpan:T.length,children:(0,p.jsx)(t.Text,{textAlign:"center",width:"100%",color:S,fontSize:"sm",fontWeight:"700",children:"-- No Data Found --"})})}):null===F||void 0===F?void 0:F.map(((e,l)=>{var n;return N(e),(0,d.createElement)(a.Tr,{...null===e||void 0===e?void 0:e.getRowProps(),key:l},null===e||void 0===e||null===(n=e.cells)||void 0===n?void 0:n.map(((e,l)=>{let n="";var o;if("#"===(null===e||void 0===e?void 0:e.column.Header))n=(0,p.jsx)(t.Flex,{align:"center",children:(0,p.jsx)(t.Text,{color:S,fontSize:"sm",fontWeight:"700",children:(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.index)+1})});else if("Title"===(null===e||void 0===e?void 0:e.column.Header))n=(0,p.jsx)(t.Text,{onClick:()=>(e=>{var l,n;z(null===e||void 0===e||null===(l=e.row)||void 0===l||null===(n=l.values)||void 0===n?void 0:n._id),k(!0)})(e),me:"10px",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"},cursor:"pointer"},color:"green.400",fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("Related"===(null===e||void 0===e?void 0:e.column.Header))n=(0,p.jsx)(t.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "});else if("Assignment To"===(null===e||void 0===e?void 0:e.column.Header))n=(0,p.jsx)(t.Text,{me:"10px",color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:" - "});else if("Start Date"===(null===e||void 0===e?void 0:e.column.Header))n=(0,p.jsx)(t.Text,{color:S,fontSize:"sm",fontWeight:"700",children:null===e||void 0===e?void 0:e.value});else if("End Date"===(null===e||void 0===e?void 0:e.column.Header)){var i;n=(0,p.jsx)(t.Text,{color:S,fontSize:"sm",fontWeight:"700",children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.values.start})}return(0,d.createElement)(a.Td,{...null===e||void 0===e?void 0:e.getCellProps(),key:l,fontSize:{sm:"14px"},minW:{sm:"150px",md:"200px",lg:"auto"},borderColor:"transparent"},n)})))}))})]})}),(null===g||void 0===g?void 0:g.length)>5&&(0,p.jsx)(x.Z,{gotoPage:O,gopageValue:I,setGopageValue:L,pageCount:_,canPreviousPage:A,previousPage:E,canNextPage:G,pageOptions:H,setPageSize:V,nextPage:Z,pageSize:R,pageIndex:M})]})}},4399:(e,l,n)=>{n.d(l,{Z:()=>j});var o=n(5272),t=n(7917),i=n(2504),a=n(8735),d=n(4220),s=n(2426),r=n.n(s),c=n(2791),u=n(7692),x=n(1087),v=n(1526),m=n(1634),h=n(2285),p=n(7689),g=n(184);const j=e=>{var l,n,s,j,f,b;const{onClose:S,isOpen:C,info:T,fetchData:y}=e,[k,w]=(0,c.useState)(),[z,I]=(0,c.useState)(!1),[L,D]=(0,c.useState)(!1),P=JSON.parse(localStorage.getItem("user")),[B,W]=(0,c.useState)(!1),N=(0,p.s0)();(0,c.useEffect)((()=>{(async()=>{if(T){var e,l,n;W(!0);let o=await(0,v.ac)("api/task/view/",null!==T&&void 0!==T&&T.event?null===T||void 0===T||null===(e=T.event)||void 0===e||null===(l=e._def)||void 0===l||null===(n=l.extendedProps)||void 0===n?void 0:n._id:T);w(null===o||void 0===o?void 0:o.data),W(!1)}})()}),[T]);return(0,g.jsxs)(t.u_,{isOpen:C,size:"md",isCentered:!0,children:[(0,g.jsx)(t.ZA,{}),(0,g.jsxs)(t.hz,{children:[(0,g.jsxs)(t.xB,{justifyContent:"space-between",display:"flex",children:["Task",(0,g.jsx)(i.IconButton,{onClick:()=>S(!1),icon:(0,g.jsx)(o.CloseIcon,{})})]}),B?(0,g.jsx)(a.Flex,{justifyContent:"center",alignItems:"center",mb:30,width:"100%",children:(0,g.jsx)(d.Z,{})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(t.fe,{children:(0,g.jsxs)(a.Grid,{templateColumns:"repeat(12, 1fr)",gap:3,children:[(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Title "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.title?null===k||void 0===k?void 0:k.title:" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Related To "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.category?null===k||void 0===k?void 0:k.category:" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task start "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.start?r()(null===k||void 0===k?void 0:k.start).format("L LT"):" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task end  "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.end?r()(null===k||void 0===k?void 0:k.end).format("L LT"):r()(null===k||void 0===k?void 0:k.start).format("L")})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Link "}),null!==k&&void 0!==k&&k.url?(0,g.jsx)("a",{target:"_blank",href:null===k||void 0===k?void 0:k.url,children:(0,g.jsx)(i.IconButton,{borderRadius:"10px",size:"md",icon:(0,g.jsx)(u.Wlb,{})})}):"-"]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task reminder "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.reminder?null===k||void 0===k?void 0:k.reminder:" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" assignment To  "}),(0,g.jsx)(x.rU,{to:null!==k&&void 0!==k&&k.assignmentTo?"admin"!==(null===P||void 0===P?void 0:P.role)?"/contactView/".concat(null===k||void 0===k?void 0:k.assignmentTo):"/admin/contactView/".concat(null===k||void 0===k?void 0:k.assignmentTo):"admin"!==(null===P||void 0===P?void 0:P.role)?"/leadView/".concat(null===k||void 0===k?void 0:k.assignmentToLead):"/admin/leadView/".concat(null===k||void 0===k?void 0:k.assignmentToLead),children:(0,g.jsx)(a.Text,{color:"green.400",sx:{"&:hover":{color:"blue.500",textDecoration:"underline"}},children:null!==k&&void 0!==k&&k.assignmentToName?null===k||void 0===k?void 0:k.assignmentToName:" - "})})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12,md:6},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task createBy "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.createByName?null===k||void 0===k?void 0:k.createByName:" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task Description"}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.description?null===k||void 0===k?void 0:k.description:" - "})]}),(0,g.jsxs)(a.GridItem,{colSpan:{base:12},children:[(0,g.jsx)(a.Text,{fontSize:"sm",fontWeight:"bold",color:"blackAlpha.900",children:" Task notes "}),(0,g.jsx)(a.Text,{children:null!==k&&void 0!==k&&k.notes?null===k||void 0===k?void 0:k.notes:" - "})]})]})}),(0,g.jsxs)(t.ze,{children:[(0,g.jsx)(i.IconButton,{variant:"outline",onClick:()=>(()=>{var e,l,n,o,t,i;null!==T&&void 0!==T&&T.event?N("admin"!==(null===P||void 0===P?void 0:P.role)?"/view/".concat(null===T||void 0===T||null===(e=T.event)||void 0===e||null===(l=e._def)||void 0===l||null===(n=l.extendedProps)||void 0===n?void 0:n._id):"/admin/view/".concat(null===T||void 0===T||null===(o=T.event)||void 0===o||null===(t=o._def)||void 0===t||null===(i=t.extendedProps)||void 0===i?void 0:i._id)):N("admin"!==(null===P||void 0===P?void 0:P.role)?"/view/".concat(T):"/admin/view/".concat(T))})(),borderRadius:"10px",size:"md",icon:(0,g.jsx)(o.ViewIcon,{})}),(0,g.jsx)(i.IconButton,{variant:"outline",onClick:()=>I(!0),ml:3,borderRadius:"10px",size:"md",icon:(0,g.jsx)(o.EditIcon,{})}),(0,g.jsx)(i.IconButton,{colorScheme:"red",onClick:()=>D(!0),ml:3,borderRadius:"10px",size:"md",icon:(0,g.jsx)(o.DeleteIcon,{})}),(0,g.jsx)(h.Z,{fetchData:y,isOpen:z,onClose:I,viewClose:S,id:null!==T&&void 0!==T&&T.event?null===T||void 0===T||null===(l=T.event)||void 0===l||null===(n=l._def)||void 0===n||null===(s=n.extendedProps)||void 0===s?void 0:s._id:T}),(0,g.jsx)(m.Z,{fetchData:e.fetchData,isOpen:L,onClose:D,viewClose:S,url:"api/task/delete/",method:"one",id:null!==T&&void 0!==T&&T.event?null===T||void 0===T||null===(j=T.event)||void 0===j||null===(f=j._def)||void 0===f||null===(b=f.extendedProps)||void 0===b?void 0:b._id:T})]})]})]})]})}}}]);
//# sourceMappingURL=5882.707182a0.chunk.js.map